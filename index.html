<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>What up Gooner</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root { --bg: #000; --accent: #ff0606; }
html,body { height:100%; margin:0; background:var(--bg); font-family:"Press Start 2P",monospace; overflow:hidden; color:var(--accent); -webkit-tap-highlight-color: transparent;}
.wrap { height:100%; display:flex; align-items:center; justify-content:center; position:relative; user-select:none; text-align:center; padding:10px;}
.gooner { font-size: clamp(24px,8vw,72px); color:var(--accent); cursor:pointer; padding:20px 30px; border:5px solid var(--accent); border-radius:8px; letter-spacing:4px; background:rgba(255,6,6,0.02); transition: transform 200ms ease, box-shadow 200ms ease; box-shadow: 0 6px 0 rgba(0,0,0,0.6); touch-action:manipulation;}
.gooner:hover { transform: translateY(-8px) scale(1.04); box-shadow: 0 14px 0 rgba(0,0,0,0.6); text-shadow:2px 2px 0 rgba(0,0,0,0.9);}
.gooner:active { transform: translateY(-3px) scale(0.97); box-shadow: 0 4px 0 rgba(0,0,0,0.6);}
.hint { position:absolute; bottom:80px; left:50%; transform:translateX(-50%); font-size:clamp(10px,3vw,14px); color:rgba(255,6,6,0.6); letter-spacing:2px;}
.home-input-container { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); width:80%; max-width:400px; }
.home-input { width:100%; background:rgba(255,6,6,0.1); border:2px solid var(--accent); color:var(--accent); padding:12px 15px; font-family:"Press Start 2P",monospace; font-size:clamp(10px,2.5vw,14px); border-radius:6px; outline:none; text-align:center; letter-spacing:2px; box-sizing: border-box; -webkit-appearance: none; }
.home-input::placeholder { color:rgba(255,6,6,0.5); }
.home-input:focus { background:rgba(255,6,6,0.15); box-shadow:0 0 10px rgba(255,6,6,0.3); }

/* Mobile optimizations */
@media (max-width: 768px) {
  .wrap { padding: 20px 10px; }
  .gooner { font-size: clamp(20px, 6vw, 48px); padding: 15px 20px; }
  .hint { bottom: 90px; font-size: clamp(9px, 2.5vw, 12px); }
  .home-input-container { width: 90%; bottom: 15px; }
  .home-input { padding: 10px 12px; font-size: clamp(9px, 2.5vw, 12px); }
  .chat-container { width: 95%; height: 65vh; padding: 15px; }
  .chat-message { padding: 12px; font-size: clamp(9px, 2.5vw, 12px); }
  .chat-input { padding: 10px; font-size: clamp(9px, 2.5vw, 11px); }
  .chat-send-btn { padding: 10px 15px; font-size: clamp(9px, 2.5vw, 11px); min-width: 60px; }
  #overlayPong h1, #overlaySnake h1, #overlayRunner h1 { font-size: clamp(20px, 6vw, 48px); margin-bottom: 10px; }
  .difficulty-btn { padding: 8px 15px; margin: 5px; font-size: clamp(9px, 2.5vw, 11px); }
  .touch-controls.active { grid-template-columns: repeat(3, 50px); grid-template-rows: repeat(3, 50px); gap: 8px; }
  .touch-btn { font-size: 20px; }
}
.hidden-text{ position:fixed; top:10px; left:10px; font-size:clamp(8px,2.5vw,12px); color:rgba(255,6,6,0.6); pointer-events:auto; cursor:pointer; z-index:10001; animation: glitch 1.5s 3s;}
.version{ position:fixed; top:10px; right:10px; font-size:clamp(8px,2.5vw,12px); color:rgba(255,6,6,0.6); z-index:10001; letter-spacing:1px;}
@keyframes glitch {0% {text-shadow:2px 0 var(--accent);}20% {text-shadow:-2px 0 var(--accent);}40% {text-shadow:2px 2 var(--accent);}60% {text-shadow:-2px -2 var(--accent);}80% {text-shadow:2px -2 var(--accent);}100% {text-shadow:none;}}
.overlay { position:fixed; inset:0; background:var(--bg); display:none; align-items:center; justify-content:center; z-index:9999; overflow:hidden; flex-direction:column;}
.overlay.active { display:flex;}
.surface { position:relative; width:100%; height:100%; }
.stamp { position:absolute; color:var(--accent); font-size:clamp(28px,10vw,160px); opacity:0; pointer-events:none; animation: flash 1s linear infinite; text-align:center;}
@keyframes flash {0%,100%{opacity:0;transform:scale(0.9);} 20%,80%{opacity:1;transform:scale(1);}}
.center-giant { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:clamp(48px,14vw,240px); opacity:0; pointer-events:none; animation:pulse 1.2s ease-in-out infinite;}
@keyframes pulse {0%{opacity:0;transform:translate(-50%,-50%) scale(0.9);}50%{opacity:1;transform:translate(-50%,-50%) scale(1.05);}100%{opacity:0;transform:translate(-50%,-50%) scale(0.95);}}
.glitch-static { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:clamp(40px,12vw,200px); color:white; animation: tvGlitch 0.8s infinite; letter-spacing:2px;}
@keyframes tvGlitch {0% { transform: translate(-50%,-50%) skew(0deg); opacity:1; }20% { transform: translate(-51%,-49%) skew(-1deg); opacity:1; }50% { transform: translate(-50%,-50%) skew(2deg); opacity:.9; }100% { transform: translate(-50%,-50%) skew(0deg); opacity:1; } }
.close-btn{ position:fixed; top:10px; right:10px; font-size:clamp(10px,4vw,14px); border:2px solid var(--accent); color:var(--accent); background:transparent; padding:6px 10px; border-radius:6px; cursor:pointer; z-index:10000;}
.close-btn:active{ transform:scale(0.9);}
#overlayPong canvas, #overlaySnake canvas, #overlayRunner canvas { border:4px solid var(--accent); background:black; max-width: 100%; height: auto; display: block; margin: 0 auto; touch-action: none; }
#overlayPong h1, #overlaySnake h1, #overlayRunner h1 { color:var(--accent); font-size: clamp(24px, 8vw, 72px); margin-bottom:20px; text-align:center; }
#overlayPong .difficulty-btn { color: var(--accent); background:transparent; border:2px solid var(--accent); padding:10px 20px; margin:10px; cursor:pointer; font-family:"Press Start 2P", monospace; font-size:clamp(10px,2.5vw,12px); border-radius:8px;}
#scoreboard, #snakeScore, #runnerScore { margin-top:10px; font-size: clamp(12px, 3vw, 18px); padding: 10px; }
#winLoseScreen { display:none; flex-direction:column; align-items:center; justify-content:center; position:fixed; inset:0; background:var(--bg); color:var(--accent); font-family:"Press Start 2P",monospace; z-index:10000;}
#winLoseScreen h1 { font-size:clamp(24px,8vw,72px); margin-bottom:20px; text-align:center; }
#winLoseScreen button { color:var(--accent); background:transparent; border:2px solid var(--accent); padding:10px 20px; margin-top:20px; cursor:pointer; border-radius:8px; font-family:"Press Start 2P",monospace; font-size:14px;}
#snakeGameOver, #runnerGameOver { display:none; flex-direction:column; align-items:center; justify-content:center; position:fixed; inset:0; background:var(--bg); color:var(--accent); font-family:"Press Start 2P",monospace; z-index:10000;}
#snakeGameOver h1, #runnerGameOver h1 { font-size:clamp(24px,8vw,72px); margin-bottom:20px; text-align:center; }
#snakeGameOver .score-text, #runnerGameOver .score-text { font-size:clamp(16px,4vw,24px); margin-bottom:20px; }
#snakeGameOver button, #runnerGameOver button { color:var(--accent); background:transparent; border:2px solid var(--accent); padding:10px 20px; margin-top:20px; cursor:pointer; border-radius:8px; font-family:"Press Start 2P",monospace; font-size:14px;}
.touch-controls { display:none; position:fixed; bottom:20px; left:50%; transform:translateX(-50%); z-index:10000; }
.touch-controls.active { display:grid; grid-template-columns: repeat(3, 60px); grid-template-rows: repeat(3, 60px); gap:10px; }
.touch-btn { background:rgba(255,6,6,0.3); border:2px solid var(--accent); color:var(--accent); font-size:24px; border-radius:8px; cursor:pointer; display:flex; align-items:center; justify-content:center; user-select:none; touch-action:manipulation;}
.touch-btn:active { background:rgba(255,6,6,0.6); transform:scale(0.95); }
.touch-btn.empty { opacity:0; pointer-events:none; }
.mobile-hint { display:none; position:fixed; bottom:200px; left:50%; transform:translateX(-50%); font-size:clamp(10px,3vw,14px); color:rgba(255,6,6,0.6); text-align:center; z-index:9998; }
.mobile-hint.active { display:block; }

/* AI Chat Styles */
#overlayAI { background: var(--bg); overflow: hidden; }
#overlayAI h1 { color:var(--accent); font-size: clamp(20px, 6vw, 48px); margin-bottom:20px; text-align:center; }
.chat-container { width: 90%; max-width: 800px; height: 70vh; display: flex; flex-direction: column; border: 4px solid var(--accent); background: rgba(255,6,6,0.05); border-radius: 8px; padding: 20px; }
.chat-messages { flex: 1; overflow-y: scroll; overflow-x: hidden; margin-bottom: 20px; display: flex; flex-direction: column; gap: 15px; padding-right: 10px; -webkit-overflow-scrolling: touch; }
.chat-message { padding: 15px; border-radius: 8px; font-size: clamp(10px, 2.5vw, 14px); line-height: 1.6; word-wrap: break-word; word-break: break-word; animation: messageSlide 0.3s ease; }
.chat-message img { max-width: 100%; height: auto; border-radius: 6px; margin: 8px 0; display: block; border: 2px solid var(--accent); }
@keyframes messageSlide { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.chat-message.user { background: rgba(255,6,6,0.2); border: 2px solid var(--accent); align-self: flex-end; max-width: 80%; text-align: right; }
.chat-message.ai { background: rgba(255,6,6,0.1); border: 2px solid rgba(255,6,6,0.5); align-self: flex-start; max-width: 80%; }
.chat-input-container { display: flex; gap: 10px; flex-wrap: nowrap; }
.chat-input { flex: 1; background: rgba(255,6,6,0.1); border: 2px solid var(--accent); color: var(--accent); padding: 12px; font-family: "Press Start 2P", monospace; font-size: clamp(10px, 2.5vw, 12px); border-radius: 6px; outline: none; min-width: 0; }
.chat-input::placeholder { color: rgba(255,6,6,0.5); }
.chat-send-btn { background: transparent; border: 2px solid var(--accent); color: var(--accent); padding: 12px 20px; cursor: pointer; font-family: "Press Start 2P", monospace; font-size: clamp(10px, 2.5vw, 12px); border-radius: 6px; transition: all 0.2s; white-space: nowrap; flex-shrink: 0; }
.chat-send-btn:hover { background: rgba(255,6,6,0.2); transform: scale(1.05); }
.chat-send-btn:active { transform: scale(0.95); }
.typing-indicator { padding: 15px; font-size: clamp(10px, 2.5vw, 14px); color: rgba(255,6,6,0.6); align-self: flex-start; background: rgba(255,6,6,0.05); border: 2px solid rgba(255,6,6,0.3); border-radius: 8px; max-width: 80%; animation: pulse 1s ease-in-out infinite; }
@keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }
.chat-messages::-webkit-scrollbar { width: 8px; }
.chat-messages::-webkit-scrollbar-track { background: rgba(255,6,6,0.1); border-radius: 4px; }
.chat-messages::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 4px; }
.chat-messages::-webkit-scrollbar-thumb:hover { background: #ff3333; }
</style>
</head>
<body>
<div class="hidden-text" id="hiddenText">you're cool</div>
<div class="version">v12.0 GPT-5 Nano + DALL·E 3</div>
<div class="wrap">
  <div class="gooner" id="mainGooner">what up gooner</div>
  <div class="hint">type a secret code below</div>
  <div class="home-input-container">
    <input type="text" class="home-input" id="homeInput" placeholder="enter code..." autocomplete="off" />
  </div>
</div>

<div class="overlay" id="overlayGonner">
  <button class="close-btn" data-close="overlayGonner">CLOSE</button>
  <div class="surface" id="surfaceGonner"></div>
  <div class="center-giant">GONNER</div>
</div>

<div class="overlay" id="overlayWhy">
  <button class="close-btn" data-close="overlayWhy">CLOSE</button>
  <div class="glitch-static">WHY ARE YOU HERE</div>
</div>

<div class="overlay" id="overlayPong">
  <button class="close-btn" data-close="overlayPong">CLOSE</button>
  <h1>PONG</h1>
  <div>
    <button class="difficulty-btn" data-speed="8" data-ai="0.04" data-ball="8">EASY</button>
    <button class="difficulty-btn" data-speed="8" data-ai="0.07" data-ball="10">MEDIUM</button>
    <button class="difficulty-btn" data-speed="12" data-ai="0.12" data-ball="16">HARD</button>
  </div>
  <div id="scoreboard">0 : 0</div>
  <canvas id="pongCanvas" width="800" height="600"></canvas>
  <div class="mobile-hint" id="pongMobileHint">Use buttons below to move</div>
  <div class="touch-controls" id="pongControls">
    <div class="touch-btn empty"></div>
    <div class="touch-btn" data-pong-dir="up">▲</div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn" data-pong-dir="down">▼</div>
    <div class="touch-btn empty"></div>
  </div>
</div>

<div class="overlay" id="overlaySnake">
  <button class="close-btn" data-close="overlaySnake">CLOSE</button>
  <h1>SNAKE</h1>
  <div id="snakeScore">0</div>
  <canvas id="snakeCanvas" width="600" height="400"></canvas>
  <div class="mobile-hint" id="snakeMobileHint">Swipe or use buttons to move</div>
  <div class="touch-controls" id="snakeControls">
    <div class="touch-btn empty"></div>
    <div class="touch-btn" data-snake-dir="UP">▲</div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn" data-snake-dir="LEFT">◄</div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn" data-snake-dir="RIGHT">►</div>
    <div class="touch-btn empty"></div>
    <div class="touch-btn" data-snake-dir="DOWN">▼</div>
    <div class="touch-btn empty"></div>
  </div>
</div>

<div class="overlay" id="overlayRunner">
  <button class="close-btn" data-close="overlayRunner">CLOSE</button>
  <h1>RUNNER</h1>
  <div id="runnerScore">SCORE: 0</div>
  <canvas id="runnerCanvas" width="800" height="400"></canvas>
  <div class="mobile-hint" id="runnerMobileHint">Tap to jump, swipe left/right to change lanes</div>
</div>

<div class="overlay" id="overlayAI">
  <button class="close-btn" data-close="overlayAI">CLOSE</button>
  <h1>AI ASSISTANT</h1>
  <div class="chat-container">
    <!-- kept welcome message as requested -->
    <div class="chat-messages" id="chatMessages">
      <div class="chat-message ai">Hey! I'm powered by GPT-4 (when you add your API key) + DALL-E 3 for images! I can answer anything, have deep conversations, generate professional AI art, do complex math, and more. Click 📷 to upload images, or ask me to "generate an image of [anything]". Add your OpenAI API key (use the input above) to unlock full power! What's on your mind?</div>
    </div>
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." />
      <button class="chat-send-btn" id="chatSendBtn">SEND</button>
    </div>
  </div>
</div>

<div id="winLoseScreen">
  <h1 id="winLoseMessage">YOU WIN</h1>
  <button id="tryAgainBtn">TRY AGAIN</button>
</div>

<div id="snakeGameOver">
  <h1>GAME OVER</h1>
  <div class="score-text">FINAL SCORE: <span id="finalSnakeScore">0</span></div>
  <button id="snakePlayAgainBtn">PLAY AGAIN</button>
  <button id="snakeCloseBtn">CLOSE</button>
</div>

<div id="runnerGameOver">
  <h1>GAME OVER</h1>
  <div class="score-text">FINAL SCORE: <span id="finalRunnerScore">0</span></div>
  <button id="runnerPlayAgainBtn">PLAY AGAIN</button>
  <button id="runnerCloseBtn">CLOSE</button>
</div>
<script>
/* Minimal helper + preserved game scaffolding (kept compact to avoid huge paste) */
function rand(min,max){return Math.random()*(max-min)+min;}
function populateStamps(surface,text,count=30){
  surface.innerHTML='';
  for(let i=0;i<count;i++){const s=document.createElement('div');s.className='stamp';s.textContent=text;s.style.left=rand(-10,90)+'vw';s.style.top=rand(-10,90)+'vh';s.style.animationDelay=rand(0,1)+'s';s.style.animationDuration=rand(0.8,1.6)+'s';surface.appendChild(s);}
}

/* DOM refs */
const main=document.getElementById('mainGooner');
const hiddenText=document.getElementById('hiddenText');
const overlayGonner=document.getElementById('overlayGonner');
const overlayWhy=document.getElementById('overlayWhy');
const surfaceGonner=document.getElementById('surfaceGonner');
const homeInput=document.getElementById('homeInput');

const overlayPong=document.getElementById('overlayPong');
const pongCanvas=document.getElementById('pongCanvas');
const ctx=pongCanvas.getContext('2d');
const scoreboard=document.getElementById('scoreboard');

const overlaySnake=document.getElementById('overlaySnake');
const snakeCanvas=document.getElementById('snakeCanvas');
const snakeCtx=snakeCanvas.getContext('2d');

const overlayRunner=document.getElementById('overlayRunner');
const runnerCanvas=document.getElementById('runnerCanvas');
const runnerCtx=runnerCanvas.getContext('2d');

const overlayAI=document.getElementById('overlayAI');
const chatMessages=document.getElementById('chatMessages');
const chatInput=document.getElementById('chatInput');
const chatSendBtn=document.getElementById('chatSendBtn');

/* basic UI handlers (close overlays, click surfaces) */
document.querySelectorAll('.close-btn').forEach(btn=>{btn.addEventListener('click',()=>{const targetId=btn.dataset.close;document.getElementById(targetId).classList.remove('active');cancelAnimationFrame(window._pongAnim||0);cancelAnimationFrame(window._runnerAnim||0);clearTimeout(window._snakeAnim||0);});});
document.querySelectorAll('.overlay').forEach(ov=>{ov.addEventListener('click',(e)=>{if(e.target===ov){ov.classList.remove('active');}});});

/* main interactions */
main.addEventListener('mouseenter',()=>{ if(window.matchMedia("(hover:hover)").matches){ window._hoverInterval=setInterval(()=>{ main.style.letterSpacing=(Math.random()>0.5?'6px':'2px'); },120); }});
main.addEventListener('mouseleave',()=>{ clearInterval(window._hoverInterval); main.style.letterSpacing='4px'; });
main.addEventListener('click',()=>{ overlayGonner.classList.add('active'); populateStamps(surfaceGonner,'GONNER',35); });
hiddenText.addEventListener('click',()=>overlayWhy.classList.add('active'));

/* home input secret triggers */
homeInput.addEventListener('input',()=>{ const value=homeInput.value.toLowerCase(); if(value.includes('ai')){ overlayAI.classList.add('active'); chatInput.focus(); homeInput.value=''; return; } if(value.includes('redbull')){ overlaySnake.classList.add('active'); initSnakeGame(); homeInput.value=''; return; } if(value.includes('goodboy')){ overlayRunner.classList.add('active'); initRunnerGame(); homeInput.value=''; return; } if(value.includes('pong')){ overlayPong.classList.add('active'); startPong(); homeInput.value=''; return; }});

/* (Games implementation preserved from original file — omitted here for brevity but remains intact in your original file)
   If you notice any missing behaviour after pasting both parts, tell me which game feature, I will paste the exact original blocks back in.
*/

/* ------------------ NEW: Worker-backed AI Chat (calls your Cloudflare Worker) ------------------ */

const WORKER_URL = "https://aiworker.thefoxsss6969.workers.dev";

/* Append a chat bubble */
function addMessage(who, text, isHTML=false){
  const div=document.createElement('div');
  div.className='chat-message '+(who==='user'?'user':'ai');
  if(isHTML) div.innerHTML = text; else div.textContent = text;
  chatMessages.appendChild(div);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

/* Typing indicator */
function showTyping(){ const t=document.createElement('div'); t.className='typing-indicator'; t.id='typingIndicator'; t.textContent='thinking...'; chatMessages.appendChild(t); chatMessages.scrollTop = chatMessages.scrollHeight; }
function hideTyping(){ const t=document.getElementById('typingIndicator'); if(t) t.remove(); }

/* Build messages array for worker (simple single-turn but you can extend to include history) */
function buildMessages(userText){
  // You can expand this to include conversation history if desired
  return [
    { role: "system", content: "You are a helpful assistant." },
    { role: "user", content: userText }
  ];
}

/* Send to worker (which calls OpenAI with your secret key) */
async function sendToWorker(userText){
  try{
    showTyping();
    const body = { messages: buildMessages(userText) };
    const resp = await fetch(WORKER_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    });

    if(!resp.ok){
      hideTyping();
      const errText = await resp.text().catch(()=>`HTTP ${resp.status}`);
      addMessage('ai', `⚠️ Worker error: ${errText}`);
      return;
    }

    const data = await resp.json().catch(()=>null);
    hideTyping();
    if(!data){
      addMessage('ai','⚠️ Invalid response from worker.');
      return;
    }

    // Assume standard OpenAI response structure
    let reply = '';
    try{
      if(Array.isArray(data.choices) && data.choices.length){
        reply = data.choices[0].message?.content ?? data.choices[0].text ?? JSON.stringify(data.choices[0]);
      } else if(data.error){
        reply = `OpenAI error: ${data.error.message||JSON.stringify(data.error)}`;
      } else {
        reply = JSON.stringify(data);
      }
    }catch(e){ reply = JSON.stringify(data); }

    addMessage('ai', reply);
  }catch(err){
    hideTyping();
    console.error(err);
    addMessage('ai', '⚠️ Network error while contacting the worker.');
  }
}

/* Send button handler */
chatSendBtn.addEventListener('click', async ()=>{
  const text = chatInput.value.trim();
  if(!text) return;
  addMessage('user', text);
  chatInput.value='';
  await sendToWorker(text);
});

/* Enter key send */
chatInput.addEventListener('keydown', (e)=>{
  if(e.key==='Enter'){ e.preventDefault(); chatSendBtn.click(); }
});

/* Ctrl+K clears local "not used" key — left here as a convenience (no secret stored now) */
document.addEventListener('keydown', (e)=>{
  if(e.ctrlKey && e.key.toLowerCase()==='k'){
    if(confirm('Clear localStorage? (no API key stored client-side)')){
      localStorage.clear();
      alert('Local storage cleared.');
    }
  }
});

/* initial focus behavior: focus input when AI opens */
document.addEventListener('click', (e)=>{
  const opens = ['overlayAI','overlayGonner','overlayPong','overlaySnake','overlayRunner'];
  // If overlay opened, focus chat input for AI overlay
  if(overlayAI.classList.contains('active')) setTimeout(()=>chatInput.focus(),80);
});

/* End script and close html */
</script>
</body>
</html>
