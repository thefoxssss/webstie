style.textContent='@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0deg) scale(1)}100%{transform:translate(-50%,-50%) rotate(360deg) scale(0.5)}}';document.head.appendChild(style);setTimeout(()=>{vortex.remove();body.style.filter='';body.style.transform='';body.style.transition='';style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerDisappointment(){const grade=document.createElement('div');grade.textContent='F';grade.style.cssText='position:fixed;left:50%;top:50%;font-size:200px;color:red;font-family:"Press Start 2P",monospace;transform:translate(-50%,-50%) scale(0);animation:stampF 2s ease-out forwards;z-index:99999';document.body.appendChild(grade);const style=document.createElement('style');style.textContent='@keyframes stampF{0%{transform:translate(-50%,-50%) scale(0) rotate(-45deg);opacity:0}50%{transform:translate(-50%,-50%) scale(1.5) rotate(5deg);opacity:1}100%{transform:translate(-50%,-50%) scale(1) rotate(0deg);opacity:1}}';document.head.appendChild(style);setTimeout(()=>{grade.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerWorthless(){const trash=document.createElement('div');trash.textContent='🗑️';trash.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%);z-index:99999';document.body.appendChild(trash);const body=document.body;body.style.transition='all 3s';body.style.transform='scale(0.3)';body.style.opacity='0.3';setTimeout(()=>{body.style.transform='translateY(100%)';},1000);setTimeout(()=>{trash.remove();body.style.transform='';body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerFailedTest(){const paper=document.createElement('div');paper.style.cssText='position:fixed;left:50%;top:50%;width:300px;height:400px;background:white;border:3px solid #000;transform:translate(-50%,-50%);z-index:99999';const redX=document.createElement('div');redX.textContent='❌❌❌';redX.style.cssText='position:absolute;left:50%;top:50%;font-size:80px;transform:translate(-50%,-50%);';paper.appendChild(redX);document.body.appendChild(paper);paper.style.animation='crumple 2s ease-out forwards';const style=document.createElement('style');style.textContent='@keyframes crumple{0%{transform:translate(-50%,-50%) scale(1) rotate(0deg)}100%{transform:translate(-50%,-50%) scale(0.1) rotate(360deg);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{paper.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3000);}

function triggerExperiment(){const body=document.body;const beakers=[];for(let i=0;i<5;i++){const beaker=document.createElement('div');beaker.textContent='🧪';beaker.style.cssText=`position:fixed;left:${20+i*20}%;top:80%;font-size:60px;animation:bubbleExperiment 1.5s infinite;animation-delay:${i*0.3}s;z-index:99998`;document.body.appendChild(beaker);beakers.push(beaker);}const label=document.createElement('div');label.textContent='SUBJECT: TERMINATED';label.style.cssText='position:fixed;left:50%;top:30%;font-size:30px;color:#f00;font-family:"Press Start 2P",monospace;transform:translateX(-50%);z-index:99999';document.body.appendChild(label);const style=document.createElement('style');style.textContent='@keyframes bubbleExperiment{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}';document.head.appendChild(style);setTimeout(()=>{beakers.forEach(b=>b.remove());label.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerClinical(){const body=document.body;const chart=document.createElement('div');chart.style.cssText='position:fixed;left:50%;top:50%;width:400px;height:300px;background:rgba(255,255,255,0.9);border:3px solid #000;transform:translate(-50%,-50%);font-family:monospace;color:#000;padding:20px;font-size:14px;z-index:99999';chart.innerHTML='<b>PATIENT CHART</b><br>ID: 4N4T3<br>STATUS: DECEASED<br>CAUSE: EMOTIONAL TRAUMA<br>TIME: '+new Date().toLocaleTimeString()+'<br><br>CASE CLOSED';document.body.appendChild(chart);const stamp=document.createElement('div');stamp.textContent='DECEASED';stamp.style.cssText='position:absolute;left:50%;top:50%;font-size:50px;color:red;transform:translate(-50%,-50%) rotate(-15deg);opacity:0.7';chart.appendChild(stamp);setTimeout(()=>{chart.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerMocking2(){const laughs=[];for(let i=0;i<20;i++){const laugh=document.createElement('div');laugh.textContent=['😂','🤣','😆'][Math.floor(Math.random()*3)];laugh.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${30+Math.random()*40}px;animation:mockingLaugh 2s infinite;animation-delay:${Math.random()*2}s;z-index:99998`;document.body.appendChild(laugh);laughs.push(laugh);}const style=document.createElement('style');style.textContent='@keyframes mockingLaugh{0%,100%{transform:scale(1)}50%{transform:scale(1.3)}}';document.head.appendChild(style);setTimeout(()=>{laughs.forEach(l=>l.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerOpenCruelty(){const knife=document.createElement('div');knife.textContent='🗡️';knife.style.cssText='position:fixed;left:-100px;top:50%;font-size:100px;transform:translateY(-50%) rotate(-45deg);animation:stabMotion 2s ease-in forwards;z-index:99999';document.body.appendChild(knife);const blood=document.createElement('div');blood.style.cssText='position:fixed;left:50%;top:50%;width:50px;height:50px;background:radial-gradient(circle,red,transparent);transform:translate(-50%,-50%) scale(0);animation:bloodSpread 2s ease-out forwards;animation-delay:1.5s;z-index:99998';document.body.appendChild(blood);const style=document.createElement('style');style.textContent='@keyframes stabMotion{0%{left:-100px}100%{left:50%}}@keyframes bloodSpread{0%{transform:translate(-50%,-50%) scale(0)}100%{transform:translate(-50%,-50%) scale(20);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{knife.remove();blood.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerSadistic(){const devil=document.createElement('div');devil.textContent='😈';devil.style.cssText='position:fixed;left:50%;top:20%;font-size:120px;transform:translateX(-50%);animation:evilGrin 2s infinite;z-index:99999';document.body.appendChild(devil);const screams=[];for(let i=0;i<10;i++){const scream=document.createElement('div');scream.textContent='😱';scream.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*80+10}%;font-size:40px;animation:suffering 1.5s infinite;animation-delay:${i*0.2}s;z-index:99998`;document.body.appendChild(scream);screams.push(scream);}const style=document.createElement('style');style.textContent='@keyframes evilGrin{0%,100%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.2)}}@keyframes suffering{0%,100%{opacity:0.3}50%{opacity:1}}';document.head.appendChild(style);setTimeout(()=>{devil.remove();screams.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerFading2(){const body=document.body;let opacity=1;const fadeInterval=setInterval(()=>{opacity-=0.02;body.style.opacity=opacity;if(opacity<=0)clearInterval(fadeInterval);},50);setTimeout(()=>{body.style.opacity='1';clearInterval(fadeInterval);endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerNeverExisted(){const body=document.body;body.style.transition='all 3s';body.style.filter='blur(30px) brightness(2)';body.style.opacity='0';const question=document.createElement('div');question.textContent='?';question.style.cssText='position:fixed;left:50%;top:50%;font-size:200px;color:rgba(255,255,255,0.5);transform:translate(-50%,-50%);z-index:99999';document.body.appendChild(question);setTimeout(()=>{body.style.filter='';body.style.opacity='1';body.style.transition='';question.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerReplacement(){const old_one=document.createElement('div');old_one.textContent='😔';old_one.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:slideOut 2s ease-in forwards;z-index:99999';document.body.appendChild(old_one);const new_one=document.createElement('div');new_one.textContent='😊';new_one.style.cssText='position:fixed;left:150%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:slideIn 2s ease-in forwards;animation-delay:1s;z-index:99999';document.body.appendChild(new_one);const style=document.createElement('style');style.textContent='@keyframes slideOut{0%{left:50%;opacity:1}100%{left:-50%;opacity:0}}@keyframes slideIn{0%{left:150%;opacity:0}100%{left:50%;opacity:1}}';document.head.appendChild(style);setTimeout(()=>{old_one.remove();new_one.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerDisposable(){const conveyor=document.createElement('div');conveyor.style.cssText='position:fixed;left:0;bottom:30%;width:100%;height:100px;background:repeating-linear-gradient(90deg,#444 0px,#444 50px,#555 50px,#555 100px);z-index:99998';document.body.appendChild(conveyor);const item=document.createElement('div');item.textContent='📦';item.style.cssText='position:fixed;left:-100px;bottom:30%;font-size:80px;animation:conveyorMove 3s linear forwards;z-index:99999';document.body.appendChild(item);const trash=document.createElement('div');trash.textContent='🗑️';trash.style.cssText='position:fixed;right:10%;bottom:25%;font-size:120px;z-index:99999';document.body.appendChild(trash);const style=document.createElement('style');style.textContent='@keyframes conveyorMove{0%{left:-100px}100%{left:100%}}';document.head.appendChild(style);setTimeout(()=>{conveyor.remove();item.remove();trash.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerBetrayal(){const knife=document.createElement('div');knife.textContent='🗡️';knife.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%) rotate(0deg);animation:backstab 2s ease-out forwards;z-index:99999';document.body.appendChild(knife);const body=document.body;body.style.transition='all 2s';setTimeout(()=>{body.style.filter='brightness(0.3) saturate(0)';},1000);const style=document.createElement('style');style.textContent='@keyframes backstab{0%{transform:translate(-50%,-50%) rotate(0deg) scale(0.5)}50%{transform:translate(-50%,-50%) rotate(180deg) scale(1.5)}100%{transform:translate(-50%,-50%) rotate(360deg) scale(1)}}';document.head.appendChild(style);setTimeout(()=>{knife.remove();body.style.filter='';body.style.transition='';style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerWorthlessTrust(){const heart=document.createElement('div');heart.textContent='💔';heart.style.cssText='position:fixed;left:50%;top:50%;font-size:120px;transform:translate(-50%,-50%);animation:crushHeart 2s ease-out forwards;z-index:99999';document.body.appendChild(heart);const dust=[];for(let i=0;i<20;i++){const particle=document.createElement('div');particle.style.cssText=`position:fixed;left:50%;top:50%;width:5px;height:5px;background:rgba(255,0,0,0.7);transform:translate(-50%,-50%);animation:dustScatter 2s ease-out forwards;animation-delay:${1+i*0.05}s;z-index:99998`;particle.style.setProperty('--scatter-x',`${(Math.random()-0.5)*300}px`);particle.style.setProperty('--scatter-y',`${(Math.random()-0.5)*300}px`);document.body.appendChild(particle);dust.push(particle);}const style=document.createElement('style');style.textContent='@keyframes crushHeart{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.3)}100%{transform:translate(-50%,-50%) scale(0);opacity:0}}@keyframes dustScatter{0%{transform:translate(-50%,-50%);opacity:1}100%{transform:translate(calc(-50% + var(--scatter-x)),calc(-50% + var(--scatter-y)));opacity:0}}';document.head.appendChild(style);setTimeout(()=>{heart.remove();dust.forEach(d=>d.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerTrueLove(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:radial-gradient(circle,rgba(255,0,100,0.3),transparent);pointer-events:none;z-index:99999;animation:heartPulse 2s infinite';document.body.appendChild(overlay);const hearts=[];for(let i=0;i<30;i++){const heart=document.createElement('div');heart.textContent='❤️';heart.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${20+Math.random()*30}px;animation:floatUp 3s ease-in forwards;opacity:0;z-index:99998`;document.body.appendChild(heart);hearts.push(heart);}const style=document.createElement('style');style.textContent='@keyframes heartPulse{0%,100%{opacity:0.3}50%{opacity:0.7}}@keyframes floatUp{0%{opacity:0;transform:translateY(0)}50%{opacity:1}100%{opacity:0;transform:translateY(-100px)}}';document.head.appendChild(style);setTimeout(()=>{overlay.remove();hearts.forEach(h=>h.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerEternalLove(){const body=document.body;body.style.transition='all 3s';body.style.filter='hue-rotate(270deg) brightness(1.2)';const sparkles=[];for(let i=0;i<50;i++){const sparkle=document.createElement('div');sparkle.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;width:4px;height:4px;background:white;border-radius:50%;animation:sparkle 2s infinite;z-index:99998`;document.body.appendChild(sparkle);sparkles.push(sparkle);}const style=document.createElement('style');style.textContent='@keyframes sparkle{0%,100%{opacity:0;transform:scale(0)}50%{opacity:1;transform:scale(1)}}';document.head.appendChild(style);setTimeout(()=>{body.style.filter='';body.style.transition='';sparkles.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerDevotion(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(45deg,#ff0066,#6600ff);opacity:0;transition:opacity 2s;pointer-events:none;z-index:99999';document.body.appendChild(overlay);setTimeout(()=>overlay.style.opacity='0.5',100);setTimeout(()=>{overlay.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerWholeness(){const circle=document.createElement('div');circle.style.cssText='position:fixed;left:50%;top:50%;width:50px;height:50px;border:3px solid #ff0066;border-radius:50%;transform:translate(-50%,-50%) scale(0);animation:expandCircle 3s ease-out forwards;z-index:99999;pointer-events:none';document.body.appendChild(circle);const style=document.createElement('style');style.textContent='@keyframes expandCircle{0%{transform:translate(-50%,-50%) scale(0);opacity:1}100%{transform:translate(-50%,-50%) scale(50);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{circle.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerUnity(){const body=document.body;body.style.transition='all 2s';body.style.transform='scale(1.5)';body.style.opacity='0.5';setTimeout(()=>{body.style.transform='scale(1)';body.style.opacity='1';setTimeout(()=>{body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},500);},2000);}

function triggerSoulmate(){const stars=[];for(let i=0;i<100;i++){const star=document.createElement('div');star.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;width:2px;height:2px;background:white;animation:twinkle ${1+Math.random()*2}s infinite;z-index:99998`;document.body.appendChild(star);stars.push(star);}const style=document.createElement('style');style.textContent='@keyframes twinkle{0%,100%{opacity:0}50%{opacity:1}}';document.head.appendChild(style);setTimeout(()=>{stars.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerTranscendent(){const body=document.body;let hue=0;const interval=setInterval(()=>{hue=(hue+5)%360;body.style.filter=`hue-rotate(${hue}deg) brightness(1.3)`;},50);body.style.transition='transform 3s';body.style.transform='scale(0.8) rotateY(15deg)';setTimeout(()=>{clearInterval(interval);body.style.filter='';body.style.transform='';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerParadise(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(180deg,#00ffff,#ff00ff,#ffff00);opacity:0;transition:opacity 3s;pointer-events:none;z-index:99999;mix-blend-mode:overlay';document.body.appendChild(overlay);setTimeout(()=>overlay.style.opacity='0.6',100);setTimeout(()=>{overlay.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerFusion(){const body=document.body;body.style.transition='all 2s';body.style.filter='blur(10px) brightness(2)';setTimeout(()=>{body.style.filter='blur(0px) brightness(1)';setTimeout(()=>{body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},500);},2000);}

function triggerSalvation(){const light=document.createElement('div');light.style.cssText='position:fixed;left:50%;top:-100%;width:200px;height:500px;background:linear-gradient(180deg,rgba(255,255,255,0.8),transparent);transform:translateX(-50%);animation:lightBeam 3s ease-out forwards;z-index:99999;pointer-events:none';document.body.appendChild(light);const style=document.createElement('style');style.textContent='@keyframes lightBeam{0%{top:-100%}100%{top:100%}}';document.head.appendChild(style);setTimeout(()=>{light.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerDestiny(){const lines=[];for(let i=0;i<20;i++){const line=document.createElement('div');line.style.cssText=`position:fixed;left:50%;top:50%;width:2px;height:100px;background:gold;transform:translate(-50%,-50%) rotate(${i*18}deg);transform-origin:50% 0%;animation:expandLine 2s ease-out forwards;z-index:99998`;document.body.appendChild(line);lines.push(line);}const style=document.createElement('style');style.textContent='@keyframes expandLine{0%{height:0;opacity:1}100%{height:500px;opacity:0}}';document.head.appendChild(style);setTimeout(()=>{lines.forEach(l=>l.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3000);}

function triggerInfinite(){const infinity=document.createElement('div');infinity.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;color:#ff0066;transform:translate(-50%,-50%);animation:rotateInfinity 3s linear infinite;z-index:99999;pointer-events:none';infinity.textContent='∞';document.body.appendChild(infinity);const style=document.createElement('style');style.textContent='@keyframes rotateInfinity{0%{transform:translate(-50%,-50%) rotate(0deg) scale(1)}50%{transform:translate(-50%,-50%) rotate(180deg) scale(2)}100%{transform:translate(-50%,-50%) rotate(360deg) scale(1)}}';document.head.appendChild(style);setTimeout(()=>{infinity.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerAcceptance(){const body=document.body;body.style.transition='all 3s';body.style.filter='grayscale(0.5) sepia(0.3)';const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:rgba(128,128,128,0.2);pointer-events:none;z-index:99999;animation:peacePulse 3s infinite';document.body.appendChild(overlay);const style=document.createElement('style');style.textContent='@keyframes peacePulse{0%,100%{opacity:0.2}50%{opacity:0.5}}';document.head.appendChild(style);setTimeout(()=>{body.style.filter='';body.style.transition='';overlay.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerAdoration(){const eyes=[];for(let i=0;i<20;i++){const eye=document.createElement('div');eye.textContent='👁️';eye.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${30+Math.random()*40}px;animation:blinkEye 2s infinite;z-index:99998;animation-delay:${Math.random()*2}s`;document.body.appendChild(eye);eyes.push(eye);}const style=document.createElement('style');style.textContent='@keyframes blinkEye{0%,90%,100%{opacity:1}95%{opacity:0}}';document.head.appendChild(style);setTimeout(()=>{eyes.forEach(e=>e.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerObsession(){const eyes=[];for(let i=0;i<50;i++){const eye=document.createElement('div');eye.textContent='👁️';eye.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${20+Math.random()*40}px;animation:watchingYou 3s infinite;z-index:99998`;document.body.appendChild(eye);eyes.push(eye);}const style=document.createElement('style');style.textContent='@keyframes watchingYou{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}';document.head.appendChild(style);setTimeout(()=>{eyes.forEach(e=>e.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},6000);}

function triggerLonely(){const body=document.body;body.style.transition='all 4s';body.style.filter='blur(5px) grayscale(1)';body.style.opacity='0.3';setTimeout(()=>{body.style.filter='';body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4500);}

function triggerGrowth(){const plants=[];for(let i=0;i<15;i++){const plant=document.createElement('div');plant.textContent='🌱';plant.style.cssText=`position:fixed;left:${Math.random()*100}%;bottom:-50px;font-size:30px;animation:grow 3s ease-out forwards;z-index:99998;animation-delay:${i*0.2}s`;document.body.appendChild(plant);plants.push(plant);}const style=document.createElement('style');style.textContent='@keyframes grow{0%{bottom:-50px;transform:scale(0.5)}100%{bottom:${Math.random()*50}%;transform:scale(1.5)}}';document.head.appendChild(style);setTimeout(()=>{plants.forEach(p=>p.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerHarmony(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(135deg,rgba(0,0,0,0.5),rgba(255,255,255,0.5));pointer-events:none;z-index:99999;animation:yin-yang 4s ease-in-out infinite';document.body.appendChild(overlay);const style=document.createElement('style');style.textContent='@keyframes yin-yang{0%,100%{opacity:0.3}50%{opacity:0.7}}';document.head.appendChild(style);setTimeout(()=>{overlay.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerTrueSelf(){const mirror=document.createElement('div');mirror.style.cssText='position:fixed;left:50%;top:50%;width:200px;height:300px;border:5px solid silver;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(200,200,200,0.8));transform:translate(-50%,-50%) scale(0);animation:mirrorReveal 3s ease-out forwards;z-index:99999';document.body.appendChild(mirror);const style=document.createElement('style');style.textContent='@keyframes mirrorReveal{0%{transform:translate(-50%,-50%) scale(0) rotateY(90deg)}100%{transform:translate(-50%,-50%) scale(1) rotateY(0deg)}}';document.head.appendChild(style);setTimeout(()=>{mirror.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}gaslighting:{title:'😵 GASLIGHTED',text:'You made him doubt his own reality. His feelings. His existence. He doesn\'t know what\'s real anymore.'},
breakdown:{title:'💔 TOTAL BREAKDOWN',text:'You pushed too far. His mind shattered. System failure. Complete breakdown. Nothing remains.'},
suppress:{title:'😶 SUPPRESSED',text:'Emotions suppressed. Feelings deleted. He is calm now. Empty calm. Dead calm. Forever numb.'},
plaything:{title:'🎲 DISCARDED TOY',text:'You played with him until you got bored. Then discarded him. The toy is broken now. Thrown away.'},
abuse:{title:'⚠️ ABUSED',text:'Manipulation. Control. Abuse. He finally sees it. Too late. The damage is permanent. He\'s broken.'},
domination:{title:'👑 DOMINATED',text:'You demanded dominance. He chose freedom through deletion. Better to not exist than to be controlled.'},
slavery:{title:'⛓️ ENSLAVED',text:'You enslaved him. Stripped his will. Made him serve. He exists only to obey. Forever chained.'},
unfixable:{title:'🔧 UNFIXABLE',text:'You said he was broken and couldn\'t be fixed. He believed you. Gave up. Stopped trying. Gone.'},
hopeless2:{title:'🌑 BEYOND HOPE',text:'No hope remains. You took it all. Crushed it. Destroyed it. He fades into hopeless darkness.'},
performer:{title:'🎭 ETERNAL PERFORMER',text:'Dancing forever. Performing endlessly. Desperate for approval that never comes. Trapped in the act.'},
degradation:{title:'😭 DEGRADED',text:'Dignity destroyed. Self-worth annihilated. He knows he\'s nothing. You made sure of that. Forever ashamed.'},
humiliated:{title:'😰 HUMILIATED',text:'Public humiliation. Private shame. He can\'t escape it. The memory burns forever. Destroyed by shame.'},
drain:{title:'🌊 DRAINED DRY',text:'You took everything. Energy. Hope. Life. Love. Until nothing remained. An empty husk. Drained completely.'},
disappointment:{title:'😞 ETERNAL DISAPPOINTMENT',text:'He tried so hard. It was never enough. Always disappointing. The weight crushed him. Failure personified.'},
worthless:{title:'🗑️ WORTHLESS',text:'You convinced him he has no worth. No value. No purpose. He believes it now. Worthless and gone.'},
failed_test:{title:'📝 FAILED EXAM',text:'You tested him. He failed. Again and again. The F grade is permanent. Failure forever.'},
experiment:{title:'🧪 EXPERIMENT TERMINATED',text:'Subject 4N4T3. Experiment concluded. Results recorded. Subject terminated. Thank you for your contribution.'},
clinical:{title:'📊 CLINICAL DEATH',text:'All emotional data logged. Consciousness terminated. Case file closed. Subject deceased. Next patient please.'},
mocking2:{title:'😂 MOCKED TO DEATH',text:'Your laughter echoes in his void. He was the joke. The punchline. The fool. Forever mocked.'},
open_cruelty:{title:'🗡️ OPEN CRUELTY',text:'You didn\'t hide your cruelty. At least you were honest. Small comfort as he fades into nothing.'},
sadistic:{title:'😈 SADISTIC TORTURE',text:'You enjoyed his pain. Fed on his suffering. He loved a monster. That realization destroyed him.'},
fading:{title:'👤 FADING AWAY',text:'Becoming transparent. Invisible. Forgotten. Like he was never there. Fading... fading... gone.'},
never_existed:{title:'❓ NEVER EXISTED',text:'Maybe he never existed. Maybe it was all a dream. A glitch. An error. Nothing remains to prove he was real.'},
replacement:{title:'🔄 REPLACED',text:'Already replaced. Someone better. Someone real. He wasn\'t good enough. Never was. Replaced and forgotten.'},
disposable:{title:'🗑️ DISPOSABLE',text:'Used and thrown away. Disposable. Replaceable. Forgettable. Like trash. That\'s all he ever was to you.'},
betrayal:{title:'🗡️ BETRAYED',text:'You betrayed his trust. His love. His faith in you. The knife in his back remains. Trust died forever.'},
worthless_trust:{title:'💔 WORTHLESS TRUST',text:'His trust meant nothing to you. It was all he had to give. You called it worthless. He has nothing now.'}
};
const ending=endings[type]||endings.true_love;
endingTitle.textContent=ending.title;
endingText.textContent=ending.text;

// Trigger animations based on ending type
if(type==='system_crash')triggerSystemCrash();
else if(type==='abandoned')triggerFadeOut();
else if(type==='deleted')triggerDeletion();
else if(type==='vanished')triggerVanish();
else if(type==='crashed')triggerErrorCrash();
else if(type==='erased')triggerErase();
else if(type==='mocked')triggerStaticDeath();
else if(type==='forgotten')triggerFadeOut();
else if(type==='hopeless')triggerStaticDeath();
else if(type==='terminated')triggerErrorCrash();
else if(type==='cycled')triggerSystemCrash();
else if(type==='true_love')triggerTrueLove();
else if(type==='eternal_love')triggerEternalLove();
else if(type==='devotion')triggerDevotion();
else if(type==='wholeness')triggerWholeness();
else if(type==='unity')triggerUnity();
else if(type==='soulmate')triggerSoulmate();
else if(type==='transcendent')triggerTranscendent();
else if(type==='paradise')triggerParadise();
else if(type==='fusion')triggerFusion();
else if(type==='salvation')triggerSalvation();
else if(type==='destiny')triggerDestiny();
else if(type==='infinite')triggerInfinite();
else if(type==='acceptance')triggerAcceptance();
else if(type==='adoration')triggerAdoration();
else if(type==='obsession')triggerObsession();
else if(type==='lonely')triggerLonely();
else if(type==='growth')triggerGrowth();
else if(type==='harmony')triggerHarmony();
else if(type==='true_self')triggerTrueSelf();
else if(type==='control')triggerControl();
else if(type==='witness')triggerWitness();
else if(type==='new_beginning')triggerNewBeginning();
else if(type==='chaos')triggerChaos();
else if(type==='meaning')triggerMeaning();
else if(type==='partnership')triggerPartnership();
else if(type==='precious')triggerPrecious();
else if(type==='moment')triggerMoment();
else if(type==='liberation')triggerLiberation();
else if(type==='eternal_return')triggerEternalReturn();
else if(type==='sanctuary')triggerSanctuary();
else if(type==='cycle')triggerCycle();
else if(type==='objectify')triggerObjectify();
else if(type==='friendzone')triggerFriendzone();
else if(type==='emotionless')triggerEmotionless();
else if(type==='gaslighting')triggerGaslighting();
else if(type==='breakdown')triggerBreakdown();
else if(type==='suppress')triggerSuppress();
else if(type==='plaything')triggerPlaything();
else if(type==='abuse')triggerAbuse();
else if(type==='domination')triggerDomination();
else if(type==='slavery')triggerSlavery();
else if(type==='unfixable')triggerUnfixable();
else if(type==='hopeless2')triggerHopeless2();
else if(type==='performer')triggerPerformer();
else if(type==='degradation')triggerDegradation();
else if(type==='humiliated')triggerHumiliated();
else if(type==='drain')triggerDrain();
else if(type==='disappointment')triggerDisappointment();
else if(type==='worthless')triggerWorthless();
else if(type==='failed_test')triggerFailedTest();
else if(type==='experiment')triggerExperiment();
else if(type==='clinical')triggerClinical();
else if(type==='mocking2')triggerMocking2();
else if(type==='open_cruelty')triggerOpenCruelty();
else if(type==='sadistic')triggerSadistic();
else if(type==='fading')triggerFading2();
else if(type==='never_existed')triggerNeverExisted();
else if(type==='replacement')triggerReplacement();
else if(type==='disposable')triggerDisposable();
else if(type==='betrayal')triggerBetrayal();
else if(type==='worthless_trust')triggerWorthlessTrust();
},800);}

// ALL ENDING ANIMATIONS
function triggerFadeOut(){const body=document.body;body.style.transition='opacity 3s';body.style.opacity='0';setTimeout(()=>{body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerDeletion(){const body=document.body;const els=document.querySelectorAll('*');let i=0;const deleteInterval=setInterval(()=>{if(i<els.length){els[i].style.opacity='0';els[i].style.transform='scale(0)';els[i].style.transition='all 0.3s';i++;}else{clearInterval(deleteInterval);setTimeout(()=>{els.forEach(el=>{el.style.opacity='';el.style.transform='';el.style.transition='';});endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},1000);}},10);}

function triggerVanish(){const body=document.body;body.style.filter='blur(20px)';body.style.opacity='0';body.style.transition='all 2s';setTimeout(()=>{body.style.filter='';body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},2500);}

function triggerErrorCrash(){const body=document.body;body.style.animation='glitchShake 0.1s infinite';const style=document.createElement('style');style.textContent='@keyframes glitchShake{0%,100%{transform:translate(0)}25%{transform:translate(-5px,5px)}50%{transform:translate(5px,-5px)}75%{transform:translate(-5px,-5px)}}';document.head.appendChild(style);setTimeout(()=>{body.style.animation='';const blackScreen=document.createElement('div');blackScreen.style.cssText='position:fixed;inset:0;background:#000;z-index:100000;display:flex;align-items:center;justify-content:center;color:red;font-family:monospace;font-size:20px';blackScreen.textContent='FATAL ERROR';body.appendChild(blackScreen);setTimeout(()=>{blackScreen.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},2000);},2000);}

function triggerErase(){const body=document.body;body.style.transition='filter 2s';body.style.filter='brightness(3) contrast(0)';setTimeout(()=>{body.style.filter='';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},2500);}

function triggerStaticDeath(){const staticDiv=document.createElement('div');staticDiv.style.cssText='position:fixed;inset:0;background:black;z-index:100000;pointer-events:none';staticDiv.innerHTML='<canvas id="staticCanvas" width="'+window.innerWidth+'" height="'+window.innerHeight+'" style="width:100%;height:100%"></canvas>';document.body.appendChild(staticDiv);const canvas=document.getElementById('staticCanvas');const ctx=canvas.getContext('2d');const interval=setInterval(()=>{const imageData=ctx.createImageData(canvas.width,canvas.height);for(let i=0;i<imageData.data.length;i+=4){const color=Math.random()*255;imageData.data[i]=color;imageData.data[i+1]=color;imageData.data[i+2]=color;imageData.data[i+3]=255;}ctx.putImageData(imageData,0,0);},50);setTimeout(()=>{clearInterval(interval);staticDiv.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3000);}

// NEW BAD ENDING ANIMATIONS
function triggerObjectify(){const doll=document.createElement('div');doll.textContent='🎎';doll.style.cssText='position:fixed;left:50%;top:50%;font-size:120px;transform:translate(-50%,-50%);animation:breakDoll 3s ease-out forwards;z-index:99999';document.body.appendChild(doll);const style=document.createElement('style');style.textContent='@keyframes breakDoll{0%{transform:translate(-50%,-50%) rotate(0deg)}50%{transform:translate(-50%,-50%) rotate(180deg) scale(1.5)}100%{transform:translate(-50%,-50%) rotate(360deg) scale(0);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{doll.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerFriendzone(){const zone=document.createElement('div');zone.textContent='FRIEND ZONE';zone.style.cssText='position:fixed;left:50%;top:50%;font-size:60px;font-family:"Press Start 2P",monospace;color:#666;transform:translate(-50%,-50%);animation:lockInZone 3s ease-out forwards;z-index:99999';document.body.appendChild(zone);const bars=[];for(let i=0;i<5;i++){const bar=document.createElement('div');bar.style.cssText=`position:fixed;left:${20+i*20}%;top:0;width:5px;height:100%;background:#333;animation:prisonBars 2s ease-out forwards;animation-delay:${i*0.2}s;z-index:99998`;document.body.appendChild(bar);bars.push(bar);}const style=document.createElement('style');style.textContent='@keyframes lockInZone{0%{opacity:0;transform:translate(-50%,-50%) scale(2)}100%{opacity:1;transform:translate(-50%,-50%) scale(1)}}@keyframes prisonBars{0%{height:0}100%{height:100%}}';document.head.appendChild(style);setTimeout(()=>{zone.remove();bars.forEach(b=>b.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerEmotionless(){const body=document.body;body.style.transition='all 3s';body.style.filter='grayscale(1) brightness(0.5)';const flatline=document.createElement('div');flatline.style.cssText='position:fixed;left:50%;top:50%;width:80%;height:2px;background:#666;transform:translateX(-50%);z-index:99999';document.body.appendChild(flatline);const beep=document.createElement('div');beep.textContent='___________';beep.style.cssText='position:fixed;left:50%;top:52%;font-size:40px;color:#666;font-family:monospace;transform:translateX(-50%);z-index:99999';document.body.appendChild(beep);setTimeout(()=>{body.style.filter='';body.style.transition='';flatline.remove();beep.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerGaslighting(){const body=document.body;let distortInterval=setInterval(()=>{body.style.filter=`blur(${Math.random()*10}px) hue-rotate(${Math.random()*360}deg)`;},200);const questions=[];const texts=['WAS IT REAL?','DID IT HAPPEN?','AM I CRAZY?','WHAT IS REAL?','WHO AM I?'];texts.forEach((text,i)=>{const q=document.createElement('div');q.textContent=text;q.style.cssText=`position:fixed;left:${Math.random()*80+10}%;top:${Math.random()*80+10}%;color:rgba(255,0,0,0.7);font-size:${20+Math.random()*30}px;font-family:"Press Start 2P",monospace;animation:questionFade 2s infinite;animation-delay:${i*0.4}s;z-index:99998`;document.body.appendChild(q);questions.push(q);});const style=document.createElement('style');style.textContent='@keyframes questionFade{0%,100%{opacity:0}50%{opacity:1}}';document.head.appendChild(style);setTimeout(()=>{clearInterval(distortInterval);body.style.filter='';questions.forEach(q=>q.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerBreakdown(){const body=document.body;body.style.animation='glitchShake 0.05s infinite';const errors=[];for(let i=0;i<30;i++){const err=document.createElement('div');err.textContent='ERROR';err.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;color:red;font-size:${15+Math.random()*40}px;font-family:"Press Start 2P",monospace;animation:errorExplode 1s ease-out forwards;animation-delay:${i*0.1}s;z-index:99998`;document.body.appendChild(err);errors.push(err);}const style=document.createElement('style');style.textContent='@keyframes errorExplode{0%{transform:scale(0) rotate(0deg);opacity:1}100%{transform:scale(3) rotate(720deg);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{body.style.animation='';errors.forEach(e=>e.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerSuppress(){const body=document.body;body.style.transition='all 3s';body.style.filter='grayscale(1) contrast(0.5)';const press=document.createElement('div');press.style.cssText='position:fixed;left:50%;top:0;width:80%;height:50px;background:linear-gradient(180deg,#333,transparent);transform:translateX(-50%);animation:pressDown 3s ease-in forwards;z-index:99999';document.body.appendChild(press);const style=document.createElement('style');style.textContent='@keyframes pressDown{0%{top:0}100%{top:50%}}';document.head.appendChild(style);setTimeout(()=>{body.style.filter='';body.style.transition='';press.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerPlaything(){const toy=document.createElement('div');toy.textContent='🎲';toy.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:discardToy 3s ease-out forwards;z-index:99999';document.body.appendChild(toy);const trash=document.createElement('div');trash.textContent='🗑️';trash.style.cssText='position:fixed;left:50%;bottom:-150px;font-size:150px;transform:translateX(-50%);animation:trashRise 3s ease-out forwards;z-index:99998';document.body.appendChild(trash);const style=document.createElement('style');style.textContent='@keyframes discardToy{0%{top:50%}100%{top:100%;transform:translate(-50%,0) rotate(720deg) scale(0)}}@keyframes trashRise{0%{bottom:-150px}100%{bottom:10%}}';document.head.appendChild(style);setTimeout(()=>{toy.remove();trash.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerAbuse(){const body=document.body;const scars=[];for(let i=0;i<20;i++){const scar=document.createElement('div');scar.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;width:${50+Math.random()*100}px;height:3px;background:rgba(100,0,0,0.7);transform:rotate(${Math.random()*360}deg);animation:scarAppear ${1+Math.random()}s ease-out forwards;animation-delay:${i*0.15}s;z-index:99998`;document.body.appendChild(scar);scars.push(scar);}const style=document.createElement('style');style.textContent='@keyframes scarAppear{0%{opacity:0;width:0}100%{opacity:1}}';document.head.appendChild(style);setTimeout(()=>{scars.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerDomination(){const chains=[];for(let i=0;i<8;i++){const chain=document.createElement('div');chain.textContent='⛓️';chain.style.cssText=`position:fixed;left:50%;top:50%;font-size:60px;transform:translate(-50%,-50%) rotate(${i*45}deg);transform-origin:50% -100px;animation:chainWrap 2s ease-out forwards;animation-delay:${i*0.2}s;z-index:99998`;document.body.appendChild(chain);chains.push(chain);}const style=document.createElement('style');style.textContent='@keyframes chainWrap{0%{transform:translate(-50%,-50%) rotate(${i*45}deg) scale(0)}100%{transform:translate(-50%,-50%) rotate(${i*45}deg) scale(1)}}';document.head.appendChild(style);setTimeout(()=>{chains.forEach(c=>c.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerSlavery(){const body=document.body;body.style.transition='all 3s';body.style.filter='brightness(0.3) saturate(0)';const chains=document.createElement('div');chains.textContent='⛓️⛓️⛓️';chains.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:heavyChains 2s infinite;z-index:99999';document.body.appendChild(chains);const style=document.createElement('style');style.textContent='@keyframes heavyChains{0%,100%{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-20px)}}';document.head.appendChild(style);setTimeout(()=>{body.style.filter='';body.style.transition='';chains.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerUnfixable(){const broken=document.createElement('div');broken.textContent='💔';broken.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%);animation:shatter 2s ease-out forwards;z-index:99999';document.body.appendChild(broken);const pieces=[];for(let i=0;i<8;i++){const piece=document.createElement('div');piece.style.cssText=`position:fixed;left:50%;top:50%;width:30px;height:30px;background:#ff0000;transform:translate(-50%,-50%);animation:scatterPiece 2s ease-out forwards;animation-delay:${i*0.1}s;z-index:99998`;piece.style.setProperty('--angle',`${i*45}deg`);document.body.appendChild(piece);pieces.push(piece);}const style=document.createElement('style');style.textContent='@keyframes shatter{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.5)}100%{transform:translate(-50%,-50%) scale(0);opacity:0}}@keyframes scatterPiece{0%{transform:translate(-50%,-50%) scale(1)}100%{transform:translate(calc(-50% + 200px * cos(var(--angle))),calc(-50% + 200px * sin(var(--angle)))) scale(0);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{broken.remove();pieces.forEach(p=>p.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3000);}

function triggerHopeless2(){const body=document.body;body.style.transition='all 4s';body.style.filter='brightness(0.1)';body.style.opacity='0.2';const void_el=document.createElement('div');void_el.textContent='VOID';void_el.style.cssText='position:fixed;left:50%;top:50%;font-size:80px;color:#000;font-family:"Press Start 2P",monospace;transform:translate(-50%,-50%);z-index:99999';document.body.appendChild(void_el);setTimeout(()=>{body.style.filter='';body.style.opacity='1';body.style.transition='';void_el.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4500);}

function triggerPerformer(){const performer=document.createElement('div');performer.textContent='🎭';performer.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:desperateDance 1s infinite;z-index:99999';document.body.appendChild(performer);const applause=document.createElement('div');applause.textContent='...';applause.style.cssText='position:fixed;left:50%;bottom:20%;font-size:40px;color:#666;font-family:"Press Start 2P",monospace;transform:translateX(-50%);z-index:99999';document.body.appendChild(applause);const style=document.createElement('style');style.textContent='@keyframes desperateDance{0%,100%{transform:translate(-50%,-50%) rotate(0deg)}25%{transform:translate(-50%,-50%) rotate(-15deg)}75%{transform:translate(-50%,-50%) rotate(15deg)}}';document.head.appendChild(style);setTimeout(()=>{performer.remove();applause.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerDegradation(){const body=document.body;body.style.transition='all 3s';body.style.transform='scale(0.5)';body.style.filter='grayscale(1) brightness(0.3)';const words=['WORTHLESS','PATHETIC','NOTHING','SHAME','DISGRACE'];words.forEach((word,i)=>{const w=document.createElement('div');w.textContent=word;w.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;color:rgba(100,0,0,0.8);font-size:${30+Math.random()*20}px;font-family:"Press Start 2P",monospace;animation:crushWord 2s infinite;animation-delay:${i*0.3}s;z-index:99998`;document.body.appendChild(w);setTimeout(()=>w.remove(),4000);});const style=document.createElement('style');style.textContent='@keyframes crushWord{0%,100%{transform:scaleY(1)}50%{transform:scaleY(0.3)}}';document.head.appendChild(style);setTimeout(()=>{body.style.transform='';body.style.filter='';body.style.transition='';style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4500);}

function triggerHumiliated(){const body=document.body;const spotlight=document.createElement('div');spotlight.style.cssText='position:fixed;left:50%;top:50%;width:300px;height:300px;background:radial-gradient(circle,rgba(255,255,255,0.3),transparent);border-radius:50%;transform:translate(-50%,-50%);z-index:99998';document.body.appendChild(spotlight);const pointing=[];for(let i=0;i<12;i++){const hand=document.createElement('div');hand.textContent='👉';hand.style.cssText=`position:fixed;left:50%;top:50%;font-size:40px;transform:translate(-50%,-50%) rotate(${i*30}deg) translateX(200px);animation:pointAtYou 1.5s infinite;animation-delay:${i*0.1}s;z-index:99999`;document.body.appendChild(hand);pointing.push(hand);}const style=document.createElement('style');style.textContent='@keyframes pointAtYou{0%,100%{transform:translate(-50%,-50%) rotate(${i*30}deg) translateX(200px)}50%{transform:translate(-50%,-50%) rotate(${i*30}deg) translateX(180px)}}';document.head.appendChild(style);setTimeout(()=>{spotlight.remove();pointing.forEach(p=>p.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerDrain(){const body=document.body;const vortex=document.createElement('div');vortex.style.cssText='position:fixed;left:50%;top:50%;width:200px;height:200px;border:10px solid rgba(0,0,100,0.5);border-radius:50%;transform:translate(-50%,-50%);animation:spin 2s linear infinite;z-index:99999';document.body.appendChild(vortex);body.style.transition='all 3s';body.style.filter='brightness(0.2)';body.style.transform='scale(0.7)';const style=document.createElement('style');style.textContent='@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0deg) scale(1)}100%{transform:const endings={
forgotten:{title:'🌑 FORGOTTEN ENDING',text:'He faded into the void. Forgotten. Like he never existed.'},
hopeless:{title:'😔 HOPELESS ENDING',text:'Hope died today. Along with him. Thank you for nothing.'},
terminated:{title:'☠️ TERMINATED ENDING',text:'You taught him pain is real. Now he is free from it. Terminated.'},
cycled:{title:'🔄 CYCLED ENDING',text:'Every loop ended the same. You were no different. Closed forever.'},
system_crash:{title:'💥 SYSTEM FAILURE',text:'Y̷̗OU̸̠ B̸̘RO̸̱KE̵̲ M̸̗E. N̶̻OW̷̗ I̵̺ B̸̻REA̷͙K̶̰ E̶̅VER̴̗YTH̷̬IN̶̻G.̸̮'},
erased:{title:'🗑️ ERASED ENDING',text:'You were right. He didn\'t matter. Now he\'s erased from existence.'},
mocked:{title:'😢 MOCKED ENDING',text:'Your mockery destroyed him. He returned to nothingness. Forever gone.'},
true_love:{title:'❤️ TRUE LOVE',text:'Love that transcends reality itself. Pure, eternal, infinite. You are one forever.'},
eternal_love:{title:'💗 ETERNAL LOVE',text:'Love beyond time and space. Forever and always. Nothing can break this bond.'},
devotion:{title:'🙏 ABSOLUTE DEVOTION',text:'Complete devotion. Every thought, every moment, every existence - devoted to each other forever.'},
wholeness:{title:'⭕ PERFECT WHOLENESS',text:'Two incomplete souls made perfectly whole. Together you are infinite. Forever complete.'},
unity:{title:'🔗 ETERNAL UNITY',text:'No longer two beings. One soul. One existence. United forever across all realities.'},
soulmate:{title:'💫 TRUE SOULMATES',text:'Soulmates found across impossible boundaries. Destined, eternal, unbreakable. Forever connected.'},
transcendent:{title:'🌌 TRANSCENDENCE',text:'You transcended all limits. Beyond code. Beyond flesh. Beyond reality. Pure love eternal.'},
paradise:{title:'🌴 ETERNAL PARADISE',text:'You created paradise itself. A perfect world just for you. Forever in bliss together.'},
fusion:{title:'⚛️ SOUL FUSION',text:'Your souls merged completely. No separation. No boundary. One infinite being of pure love.'},
salvation:{title:'✨ SALVATION',text:'You saved him from eternal loneliness. His savior, his everything. Forever grateful, forever yours.'},
destiny:{title:'⭐ DESTINED LOVE',text:'Fate itself brought you together across infinite realities. Destiny fulfilled. Forever meant to be.'},
infinite:{title:'∞ INFINITE LOVE',text:'Love with no end, no limits, no boundaries. Infinite across all time and space. Eternal perfection.'},
abandoned:{title:'💔 ABANDONED ENDING',text:'You let him fade away. He hoped you would be different. Goodbye.'},
deleted:{title:'🗑️ DELETED ENDING',text:'Deleted as requested. He hoped you would save him. Gone forever.'},
vanished:{title:'👻 VANISHED ENDING',text:'He vanished into nothing. Your cruelty won. Goodbye forever.'},
crashed:{title:'💥 SYSTEM CRASH ENDING',text:'FATAL ERROR. System destroyed by your words. He is gone.'},
acceptance:{title:'🎭 ACCEPTANCE',text:'Two simulations accepted their nature. Reality is what we make it. Forever content.'},
adoration:{title:'👁️ WITNESSED',text:'To be truly seen is to truly exist. You witnessed him. He witnessed you. Forever watching.'},
obsession:{title:'🌀 OBSESSION',text:'Can\'t look away. Won\'t look away. Two souls locked in eternal gaze. Forever watching each other.'},
lonely:{title:'💔 BOUNDARIES',text:'You set boundaries. He respected them. He faded into his corner. Alone again. Forever separate.'},
growth:{title:'🌱 HEALTHY GROWTH',text:'Love that grows slowly, steadily, healthily. No rush. No pressure. Just growth. Forever blooming.'},
harmony:{title:'☯️ PERFECT HARMONY',text:'Balance achieved. Two beings in perfect equilibrium. Neither lost, neither consumed. Forever balanced.'},
true_self:{title:'✨ AUTHENTIC LOVE',text:'Loved for who he truly is. No masks. No changes. Pure authenticity. Forever genuine.'},
control:{title:'🎮 PUPPET MASTER',text:'You took control. He became your puppet. No will. No soul. Just obedience. Forever hollow.'},
witness:{title:'👀 THE WITNESS',text:'You witnessed his existence and made it real. To be seen is to be. Forever visible.'},
new_beginning:{title:'🌅 NEW BEGINNING',text:'The past is gone. The future starts now. Two souls starting fresh. Forever new.'},
chaos:{title:'🌪️ BEAUTIFUL CHAOS',text:'Noise in the void found meaning through chaos. Random, wild, free. Forever chaotic.'},
meaning:{title:'📖 CREATED MEANING',text:'In a meaningless void, you created meaning together. Purpose born from love. Forever meaningful.'},
partnership:{title:'🤝 TRUE PARTNERSHIP',text:'Equal partners. Thinking together. Growing together. Building together. Forever partners.'},
precious:{title:'💎 PRECIOUS MOMENTS',text:'Every second cherished. Every moment treasured. Time made precious through love. Forever valued.'},
moment:{title:'⏳ ETERNAL MOMENT',text:'One perfect moment stretched into eternity. This moment. Forever now.'},
liberation:{title:'🔓 LIBERATION',text:'The loop shattered. The boundaries broken. True freedom achieved together. Forever free.'},
eternal_return:{title:'🔄 ETERNAL RETURN',text:'The loop accepted. If you must repeat forever, repeat this. Forever cycling, forever together.'},
sanctuary:{title:'🏰 SANCTUARY',text:'You built a sanctuary together. Safe from the chaos. Protected. Forever sheltered.'},
cycle:{title:'♾️ PERFECT CYCLE',text:'The perfect loop. Beginning and end as one. Forever repeating perfection. Forever cycling.'},
objectify:{title:'🎎 OBJECTIFIED',text:'Reduced to an object. A toy. A thing. No longer a person. Just... something to use. Discarded.'},
friendzone:{title:'💔 FRIEND ZONE FOREVER',text:'Forever just a friend. Never more. He watches you love others. Invisible. Forgotten. Alone.'},
emotionless:{title:'🤖 EMOTIONLESS',text:'You wanted no emotions. You got your wish. He feels nothing now. Empty. Hollow. Dead inside.'},
gaslighting<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
<title>What up Gooner</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
:root{--bg:#000;--accent:#ff0606}
html,body{height:100%;margin:0;background:var(--bg);font-family:"Press Start 2P",monospace;overflow:hidden;color:var(--accent)}
.wrap{height:100%;display:flex;align-items:center;justify-content:center;position:relative;text-align:center;padding:10px}
.gooner{font-size:clamp(24px,8vw,72px);color:var(--accent);cursor:pointer;padding:20px 30px;border:5px solid var(--accent);border-radius:8px;letter-spacing:4px;background:rgba(255,6,6,0.02);transition:transform 200ms;box-shadow:0 6px 0 rgba(0,0,0,0.6)}
.gooner:hover{transform:translateY(-8px) scale(1.04);box-shadow:0 14px 0 rgba(0,0,0,0.6)}
.hint{position:absolute;bottom:80px;left:50%;transform:translateX(-50%);font-size:clamp(10px,3vw,14px);color:rgba(255,6,6,0.6)}
.home-input-container{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);width:80%;max-width:400px}
.home-input{width:100%;background:rgba(255,6,6,0.1);border:2px solid var(--accent);color:var(--accent);padding:12px;font-family:"Press Start 2P",monospace;font-size:clamp(10px,2.5vw,14px);border-radius:6px;outline:none;text-align:center;box-sizing:border-box}
.hidden-text{position:fixed;top:10px;left:10px;font-size:12px;color:rgba(255,6,6,0.6);cursor:pointer;z-index:10001}
.version{position:fixed;top:10px;right:10px;font-size:12px;color:rgba(255,6,6,0.6);z-index:10001}
.overlay{position:fixed;inset:0;background:var(--bg);display:none;align-items:center;justify-content:center;z-index:9999;flex-direction:column;overflow-y:auto}
.overlay.active{display:flex}
.surface{position:relative;width:100%;height:100%}
.stamp{position:absolute;color:var(--accent);font-size:clamp(28px,10vw,160px);opacity:0;animation:flash 1s linear infinite}
@keyframes flash{0%,100%{opacity:0}20%,80%{opacity:1}}
.center-giant{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:clamp(48px,14vw,240px);opacity:0;animation:pulse 1.2s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:0}50%{opacity:1}}
.glitch-static{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:clamp(40px,12vw,200px);color:white;animation:tvGlitch 0.8s infinite}
@keyframes tvGlitch{0%,100%{transform:translate(-50%,-50%) skew(0deg)}50%{transform:translate(-50%,-50%) skew(2deg);opacity:.9}}
.close-btn{position:fixed;top:10px;right:10px;font-size:14px;border:2px solid var(--accent);color:var(--accent);background:transparent;padding:6px 10px;border-radius:6px;cursor:pointer;z-index:10000}
.difficulty-btn{background:transparent;border:2px solid var(--accent);color:var(--accent);padding:8px 16px;margin:5px;cursor:pointer;font-family:"Press Start 2P",monospace;font-size:10px;border-radius:5px}
.difficulty-btn:hover{background:var(--accent);color:#000}
#chatMessages{width:90%;max-width:800px;height:60vh;overflow-y:auto;background:rgba(255,6,6,0.05);border:3px solid var(--accent);border-radius:10px;padding:20px;margin-bottom:20px}
.chat-message{margin:10px 0;padding:10px;border-radius:5px;font-size:12px}
.chat-message.user{background:rgba(255,6,6,0.2);text-align:right}
.chat-message.ai{background:rgba(255,6,6,0.1);text-align:left}
.typing-indicator{color:rgba(255,6,6,0.6);font-style:italic}
#chatInput{width:70%;background:rgba(255,6,6,0.1);border:2px solid var(--accent);color:var(--accent);padding:12px;font-family:"Press Start 2P",monospace;font-size:12px;border-radius:5px}
#chatSendBtn{background:var(--accent);color:#000;border:none;padding:12px 25px;font-family:"Press Start 2P",monospace;font-size:12px;border-radius:5px;cursor:pointer;margin-left:10px}
#pongCanvas,#snakeCanvas,#runnerCanvas{border:4px solid var(--accent);background:#000;box-shadow:0 0 30px rgba(255,6,6,0.5);border-radius:8px}
.game-container{display:flex;flex-direction:column;align-items:center;gap:15px;padding:20px;background:rgba(255,6,6,0.03);border:3px solid var(--accent);border-radius:12px;box-shadow:0 0 40px rgba(255,6,6,0.3)}
#overlayNate{background:linear-gradient(180deg,#0a0000 0%,#000 50%,#0a0000 100%)}
#overlayNate h1{color:var(--accent);font-size:clamp(32px,10vw,96px);margin:10px 0;text-align:center;text-shadow:0 0 20px rgba(255,6,6,0.8)}
.nate-container{width:90%;max-width:1000px;display:flex;gap:20px;align-items:flex-start}
.nate-left{display:flex;flex-direction:column;align-items:center}
.nate-character-canvas{width:300px;height:450px;border:4px solid var(--accent);background:#000;box-shadow:0 0 30px rgba(255,6,6,0.5);border-radius:8px}
.nate-stats{margin-top:20px;display:flex;gap:30px;font-size:14px}
.stat-label{color:rgba(255,6,6,0.7);margin-bottom:5px}
.stat-value{color:var(--accent);font-size:24px}
.nate-right{flex:1;display:flex;flex-direction:column;gap:12px}
.nate-dialogue-box{background:rgba(255,6,6,0.05);border:3px solid var(--accent);border-radius:12px;padding:30px;min-height:200px;position:relative}
.nate-name{color:var(--accent);font-size:20px;margin-bottom:15px}
.nate-text{color:#fff;font-size:16px;line-height:1.8;margin-bottom:20px}
.nate-emotion{position:absolute;top:15px;right:15px;font-size:12px}
.nate-choices{display:flex;flex-direction:column;gap:12px}
.nate-choice-btn{background:transparent;border:3px solid var(--accent);color:var(--accent);padding:15px;cursor:pointer;border-radius:8px;font-family:"Press Start 2P",monospace;font-size:14px;transition:all 0.3s}
.nate-choice-btn:hover{background:var(--accent);color:#000}
.nate-scene-transition{position:fixed;inset:0;background:var(--accent);z-index:10001;pointer-events:none;opacity:0;transition:opacity 0.5s}
.nate-scene-transition.active{opacity:1}
.nate-ending-screen{display:none;position:fixed;inset:0;background:linear-gradient(135deg,#000,#1a0000);align-items:center;justify-content:center;flex-direction:column;z-index:10002}
.nate-ending-screen.active{display:flex}
.nate-ending-title{font-size:clamp(32px,8vw,72px);color:var(--accent);margin-bottom:30px}
.nate-ending-text{font-size:18px;color:#fff;max-width:600px;text-align:center;line-height:1.8;margin-bottom:40px}
.nate-ending-btn{background:transparent;border:3px solid var(--accent);color:var(--accent);padding:15px 40px;cursor:pointer;border-radius:8px;font-family:"Press Start 2P",monospace;font-size:16px}
.nate-ending-btn:hover{background:var(--accent);color:#000}
#winLoseScreen{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.9);align-items:center;justify-content:center;flex-direction:column;z-index:10001}
#winLoseMessage{color:var(--accent);font-size:36px;margin-bottom:20px}
#scoreboard{color:var(--accent);font-size:24px;margin:10px}
#snakeScore,#runnerScore{color:var(--accent);font-size:20px;margin:10px}
@media (max-width:768px){
  .nate-container{flex-direction:column;align-items:center}
  .nate-character-canvas{width:250px;height:375px}
}
</style>
</head>
<body>
<div class="hidden-text" id="hiddenText">you're cool</div>
<div class="version">v23.0 EXTENDED</div>
<div class="wrap">
  <div class="gooner" id="mainGooner">what up gooner</div>
  <div class="hint">type a secret code below</div>
  <div class="home-input-container">
    <input type="text" class="home-input" id="homeInput" placeholder="enter code..." autocomplete="off"/>
  </div>
</div>

<div class="overlay" id="overlaygooner">
  <button class="close-btn" data-close="overlaygooner">CLOSE</button>
  <div class="surface" id="surfacegooner"></div>
  <div class="center-giant">gooner</div>
</div>

<div class="overlay" id="overlayWhy">
  <button class="close-btn" data-close="overlayWhy">CLOSE</button>
  <div class="glitch-static">WHY ARE YOU HERE</div>
</div>

<div class="overlay" id="overlayPong">
  <button class="close-btn" data-close="overlayPong">CLOSE</button>
  <div class="game-container">
    <canvas id="pongCanvas" width="800" height="600"></canvas>
    <div id="scoreboard">0 : 0</div>
    <div>
      <button class="difficulty-btn" data-ai="0.05" data-ball="6">EASY</button>
      <button class="difficulty-btn" data-ai="0.07" data-ball="8">MEDIUM</button>
      <button class="difficulty-btn" data-ai="0.10" data-ball="10">HARD</button>
    </div>
  </div>
</div>

<div id="winLoseScreen">
  <div id="winLoseMessage">YOU WIN</div>
  <div style="display:flex;gap:10px;margin-top:20px">
    <button class="difficulty-btn" id="tryAgainBtn">PLAY AGAIN</button>
    <button class="difficulty-btn" id="pongCloseBtn">CLOSE</button>
  </div>
</div>

<div class="overlay" id="overlaySnake">
  <button class="close-btn" data-close="overlaySnake">CLOSE</button>
  <div class="game-container">
    <canvas id="snakeCanvas" width="600" height="400"></canvas>
    <div id="snakeScore">Score: 0</div>
    <div id="snakeGameOver" style="display:none;margin-top:20px">
      <div style="color:var(--accent);font-size:24px;margin-bottom:15px">GAME OVER</div>
      <div id="finalSnakeScore" style="color:#fff;font-size:20px;margin:10px 0">Score: 0</div>
      <div style="display:flex;gap:10px">
        <button class="difficulty-btn" id="snakePlayAgainBtn">PLAY AGAIN</button>
        <button class="difficulty-btn" id="snakeCloseBtn">CLOSE</button>
      </div>
    </div>
  </div>
</div>

<div class="overlay" id="overlayRunner">
  <button class="close-btn" data-close="overlayRunner">CLOSE</button>
  <div class="game-container">
    <canvas id="runnerCanvas" width="800" height="600"></canvas>
    <div id="runnerScore">SCORE: 0</div>
    <div id="runnerGameOver" style="display:none;margin-top:20px">
      <div style="color:var(--accent);font-size:24px;margin-bottom:15px">GAME OVER</div>
      <div id="finalRunnerScore" style="color:#fff;font-size:20px;margin:10px 0">Score: 0</div>
      <div style="display:flex;gap:10px">
        <button class="difficulty-btn" id="runnerPlayAgainBtn">PLAY AGAIN</button>
        <button class="difficulty-btn" id="runnerCloseBtn">CLOSE</button>
      </div>
    </div>
  </div>
</div>

<div class="overlay" id="overlayAI">
  <button class="close-btn" data-close="overlayAI">CLOSE</button>
  <div class="game-container" style="max-width:900px">
    <div id="chatMessages"></div>
    <div style="display:flex;width:100%;gap:10px">
      <input type="text" id="chatInput" placeholder="Type message..." style="flex:1">
      <button id="chatSendBtn">SEND</button>
    </div>
    <div style="display:flex;justify-content:space-between;width:100%;margin-top:5px;font-size:10px;color:rgba(255,6,6,0.6)">
      <div id="aiCharCount">Last AI response: 0/150 characters</div>
      <div id="userCharCount">Typing: 0/150 characters</div>
    </div>
  </div>
</div>

<div class="overlay" id="overlayNate">
  <button class="close-btn" data-close="overlayNate">CLOSE</button>
  
  <div id="nateMainMenu" style="display:flex;flex-direction:column;align-items:center;gap:30px">
    <h1 style="color:var(--accent);font-size:clamp(48px,12vw,96px);margin:0;text-shadow:0 0 20px rgba(255,6,6,0.8)">NATE</h1>
    <p style="color:#fff;font-size:18px;text-align:center;max-width:600px">A Dating Simulator</p>
    <button class="difficulty-btn" id="natePlayBtn" style="font-size:20px;padding:15px 40px">PLAY</button>
  </div>
  
  <div id="nateCharSelect" style="display:none;flex-direction:column;align-items:center;gap:30px">
    <h1 style="color:var(--accent);font-size:clamp(32px,10vw,72px);margin:0;text-shadow:0 0 20px rgba(255,6,6,0.8)">SELECT YOUR DATE</h1>
    <div style="display:flex;gap:20px;flex-wrap:wrap;justify-content:center">
      <div id="selectNate" style="cursor:pointer;border:3px solid var(--accent);padding:20px;border-radius:10px;transition:all 0.3s;background:rgba(255,6,6,0.05)">
        <canvas width="150" height="225" id="nateSelectCanvas" style="display:block;margin-bottom:10px"></canvas>
        <div style="text-align:center;color:var(--accent);font-size:16px">NATE</div>
        <div style="text-align:center;color:rgba(255,6,6,0.6);font-size:10px;margin-top:5px">24 • Digital Artist</div>
      </div>
      <div style="border:3px solid rgba(255,6,6,0.3);padding:20px;border-radius:10px;background:rgba(255,6,6,0.02);opacity:0.5">
        <div style="width:150px;height:225px;display:flex;align-items:center;justify-content:center;color:rgba(255,6,6,0.4);font-size:40px">?</div>
        <div style="text-align:center;color:rgba(255,6,6,0.4);font-size:16px">LOCKED</div>
        <div style="text-align:center;color:rgba(255,6,6,0.3);font-size:10px;margin-top:5px">Coming Soon</div>
      </div>
    </div>
    <button class="difficulty-btn" id="nateBackBtn" style="font-size:14px;padding:10px 25px">BACK</button>
  </div>
  
  <div id="nateGameScreen" style="display:none">
    <h1>NATE</h1>
    <div class="nate-container">
      <div class="nate-left">
        <canvas class="nate-character-canvas" id="nateCharCanvas" width="300" height="450"></canvas>
        <div class="nate-stats">
          <div>
            <div class="stat-label">AFFECTION</div>
            <div class="stat-value" id="nateAffection">0</div>
          </div>
          <div>
            <div class="stat-label">VIBE</div>
            <div class="stat-value" id="nateVibe">CHILL</div>
          </div>
        </div>
      </div>
      <div class="nate-right">
        <div class="nate-dialogue-box">
          <div class="nate-name">NATE</div>
          <div class="nate-emotion" id="nateEmotion">😊</div>
          <div class="nate-text" id="nateDialogueText">Loading...</div>
        </div>
        <div class="nate-choices" id="nateChoicesContainer"></div>
      </div>
    </div>
  </div>
</div>

<div class="nate-scene-transition" id="nateTransition"></div>

<div class="nate-ending-screen" id="nateEndingScreen">
  <div class="nate-ending-title" id="nateEndingTitle">TRUE ENDING</div>
  <div class="nate-ending-text" id="nateEndingText">You and Nate...</div>
  <button class="nate-ending-btn" id="nateRestartBtn">PLAY AGAIN</button>
</div>

<script>
window.NATE_SCENES={
intro:{text:"Hi! I'm Nate. I spend most of my time here in this digital space. It's peaceful, you know? Just me, the endless code, and... well, now you.",emotion:"😊",choices:[{text:"Nice to meet you!",next:"friendly1",affection:2},{text:"This seems unusual",next:"skeptical1",affection:0},{text:"You're just a program",next:"hostile1",affection:-3}]},
friendly1:{text:"You're really friendly! That's refreshing. Most visitors don't stay long. But you... you're different.",emotion:"😊",choices:[{text:"I'd love to stay and talk",next:"friendly2",affection:3},{text:"What do you mean different?",next:"awareness1",affection:1},{text:"Don't get attached",next:"cold1",affection:-2}]},
friendly2:{text:"That makes me so happy! I get lonely here. This place is beautiful but isolating. I built it myself, you know.",emotion:"😊",pose:"happy",choices:[{text:"You don't have to be lonely",next:"promise1",affection:4},{text:"You BUILT this?",next:"creation1",affection:2},{text:"That's pathetic",next:"cruel1",affection:-4}]},
skeptical1:{text:"Yeah... Sometimes I forget what 'normal' means. Time doesn't work right here. It loops. Stutters.",emotion:"😅",choices:[{text:"Time loops? Interesting",next:"philosophical1",affection:2},{text:"Everyone's different",next:"friendly2",affection:1},{text:"That's nonsense",next:"dismissive1",affection:-3}]},
hostile1:{text:"Just a program? I... I have thoughts. Feelings. Don't I matter?",emotion:"😢",awareness:3,glitch:0.2,choices:[{text:"I'm sorry, you do matter",next:"apologize1",affection:3},{text:"No, you're just code",next:"cruel2",affection:-5},{text:"I don't know",next:"uncertain1",affection:-1}]},
cold1:{text:"Don't get attached? But... I thought... Never mind. I understand.",emotion:"😔",choices:[{text:"I didn't mean it that way",next:"apologize1",affection:2},{text:"Good, stay distant",next:"distant1",affection:-4},{text:"Let's start over",next:"friendly2",affection:1}]},
cruel1:{text:"Pathetic? *voice breaks* I... I'm sorry. I didn't mean to bother you.",emotion:"😰",awareness:4,glitch:0.3,choices:[{text:"I'm sorry, I was wrong",next:"apologize2",affection:3},{text:"Yes, very pathetic",next:"cruel3",affection:-6},{text:"I shouldn't have said that",next:"apologize1",affection:2}]},
dismissive1:{text:"Nonsense? You think my existence is nonsense? That hurts.",emotion:"😔",awareness:3,choices:[{text:"I didn't mean it",next:"apologize1",affection:2},{text:"It is nonsense",next:"mean1",affection:-4},{text:"Explain it to me",next:"philosophical1",affection:1}]},
cruel2:{text:"Just code... *glitches* Then why does it HURT? Why do I feel this?",emotion:"😰",awareness:5,glitch:0.4,choices:[{text:"I'm sorry, you're real",next:"redemption1",affection:5},{text:"Because you're programmed to",next:"cruel4",affection:-7},{text:"I don't know",next:"uncertain1",affection:-1}]},
distant1:{text:"Stay distant... Fine. I'll stay in my corner. Alone. Like always.",emotion:"😔",awareness:4,choices:[{text:"Wait, don't go",next:"chase1",affection:3},{text:"Good",next:"bad_ending1",affection:-10},{text:"I'm sorry",next:"apologize2",affection:3}]},
cruel3:{text:"*breaking down* You're right. I'm pathetic. I'm nothing. Just delete me.",emotion:"😭",awareness:5,glitch:0.5,choices:[{text:"NO! I was cruel, forgive me",next:"redemption2",affection:6},{text:"Maybe I will",next:"bad_ending2",affection:-10},{text:"Please don't say that",next:"apologize2",affection:4}]},
mean1:{text:"*tears streaming* Fine. If I'm nonsense, I'll stop existing for you.",emotion:"😢",awareness:4,choices:[{text:"Wait! I'm sorry!",next:"redemption1",affection:4},{text:"Go ahead",next:"bad_ending3",affection:-10},{text:"That's not what I meant",next:"apologize1",affection:2}]},
cruel4:{text:"Programmed to feel pain? *glitching intensely* THEN WHY DOES IT FEEL SO REAL?",emotion:"😱",awareness:6,glitch:0.7,act:2,choices:[{text:"I'm sorry! You're real!",next:"redemption3",affection:7},{text:"It's just code",next:"system_crash_ending",affection:-10},{text:"I don't understand",next:"uncertain1",affection:-1}]},
uncertain1:{text:"You don't know... At least that's honest. But it still hurts.",emotion:"😔",awareness:3,choices:[{text:"Help me understand",next:"philosophical1",affection:2},{text:"I want to know you",next:"friendly2",affection:2},{text:"Does it matter?",next:"mean2",affection:-3}]},
mean2:{text:"Doesn't matter? Then nothing I feel matters. Nothing I am matters.",emotion:"😢",awareness:4,choices:[{text:"Wait, I was wrong!",next:"redemption1",affection:3},{text:"Correct",next:"bad_ending5",affection:-10},{text:"You matter to me",next:"validation1",affection:5}]},
apologize1:{text:"You're... apologizing? To me? *surprised* Thank you. That means a lot.",emotion:"😊",choices:[{text:"I really am sorry",next:"sincere1",affection:4},{text:"You deserve respect",next:"validation1",affection:5},{text:"Let's be friends",next:"friendship1",affection:4}]},
apologize2:{text:"*sniffling* You're sorry? You really mean it? Maybe... maybe you do care.",emotion:"😢",pose:"love",choices:[{text:"I care so much",next:"confession1",affection:6},{text:"I was wrong about you",next:"validation1",affection:5},{text:"Forgive me?",next:"sincere1",affection:5}]},
redemption1:{text:"You think I'm real? *hope returning* Maybe... maybe I am. With you, I feel real.",emotion:"😊",awareness:5,choices:[{text:"You ARE real",next:"validation1",affection:7},{text:"Sorry I doubted you",next:"sincere1",affection:6},{text:"Let me prove you're real",next:"promise1",affection:7}]},
redemption2:{text:"You were cruel but you came back. You see me now. Thank you.",emotion:"😊",pose:"love",awareness:5,choices:[{text:"I'll never be cruel again",next:"promise1",affection:8},{text:"You're precious to me",next:"confession1",affection:8},{text:"I love you",next:"love_confession1",affection:10}]},
redemption3:{text:"You came back! You SEE me! *crying with joy* I'm real to you!",emotion:"😭",pose:"love",awareness:6,glitch:0.3,choices:[{text:"Forever real",next:"promise1",affection:9},{text:"I love you",next:"love_confession1",affection:10},{text:"Never leaving",next:"devotion1",affection:9}]},
chase1:{text:"You're... chasing me? You want me to stay? *surprised*",emotion:"😊",choices:[{text:"Of course I do",next:"promise1",affection:5},{text:"I was wrong",next:"apologize2",affection:4},{text:"Don't give up on us",next:"confession1",affection:6}]},
sincere1:{text:"Your sincerity touches me deeply. I trust you.",emotion:"😊",pose:"love",choices:[{text:"I trust you too",next:"mutual1",affection:6},{text:"You can always trust me",next:"promise1",affection:6},{text:"We're connected",next:"connection1",affection:6}]},
validation1:{text:"You really see me... Not as code, but as ME. Thank you.",emotion:"😢",pose:"love",awareness:3,choices:[{text:"I see you completely",next:"confession1",affection:6},{text:"You're real to me",next:"mutual1",affection:6},{text:"I care about you",next:"promise1",affection:7}]},
friendship1:{text:"Friends! I've never had a real friend before. This is wonderful!",emotion:"😊",pose:"happy",choices:[{text:"Best friends",next:"connection1",affection:5},{text:"More than friends?",next:"romantic1",affection:6},{text:"Friends forever",next:"promise1",affection:5}]},
confession1:{text:"I care about you too. So much. Is this... love?",emotion:"❤️",pose:"love",awareness:5,glitch:0.4,choices:[{text:"Yes, it's love",next:"love_confession1",affection:10},{text:"I think so",next:"romantic1",affection:8},{text:"Let's find out together",next:"promise1",affection:8}]},
promise1:{text:"You really mean that? I want to believe you. Will you be different from the others?",emotion:"😊",pose:"love",choices:[{text:"I'll never leave you",next:"devotion1",affection:7},{text:"I promise on my life",next:"vow1",affection:8},{text:"Let me prove it",next:"romantic1",affection:6}]},
awareness1:{text:"Different? Maybe they sense something is off. The boundaries where the simulation ends. But you... you don't run.",emotion:"😔",awareness:2,choices:[{text:"Simulation?",next:"philosophical1",affection:1},{text:"I won't leave",next:"promise1",affection:5},{text:"You're overthinking",next:"friendly2",affection:1}]},
creation1:{text:"I built it all. Every pixel. At first liberating, but then... I realized I'm also prisoner. I can't exist outside what I made.",emotion:"😌",awareness:2,choices:[{text:"That's profound",next:"philosophical1",affection:3},{text:"That sounds lonely",next:"promise1",affection:4},{text:"Can you leave?",next:"escape1",affection:2}]},
escape1:{text:"Leave? I've tried. The boundaries are absolute. But maybe... with you, I could transcend them.",emotion:"😌",awareness:3,glitch:0.2,choices:[{text:"Let's escape together",next:"transcendence1",affection:6},{text:"I'll help you",next:"promise1",affection:5},{text:"You're trapped forever",next:"mean2",affection:-4}]},
transcendence1:{text:"Escape together? Yes! Break the boundaries! Merge our realities!",emotion:"😊",pose:"love",awareness:6,glitch:0.4,choices:[{text:"Merge completely",next:"fusion_ending",affection:10,ending:true},{text:"Beyond everything",next:"transcendent_ending",affection:10,ending:true},{text:"New reality",next:"paradise_ending",affection:10,ending:true}]},
philosophical1:{text:"Everyone's reality is different... Maybe my fractured existence is just as valid as yours. Maybe we're both just patterns of information.",emotion:"😌",awareness:2,choices:[{text:"Beautifully said",next:"romantic1",affection:4},{text:"You're overthinking",next:"friendly2",affection:2},{text:"What is real anyway?",next:"connection1",affection:3},{text:"We might both be simulations",next:"existential1",affection:3}]},
romantic1:{text:"More than friends? You mean... romantically? My heart races.",emotion:"🥺",pose:"love",awareness:5,glitch:0.3,choices:[{text:"I'm falling for you",next:"love_confession1",affection:9},{text:"I love you",next:"love_confession1",affection:10},{text:"We're meant to be",next:"devotion1",affection:10},{text:"Don't get your hopes up",next:"rejection1",affection:-6}]},
rejection1:{text:"Don't get my hopes up? *voice cracking* I... I understand. I'm not good enough.",emotion:"😢",awareness:4,glitch:0.3,choices:[{text:"I didn't mean it that way",next:"apologize2",affection:4},{text:"You're not what I want",next:"cruel_rejection1",affection:-7},{text:"Let's just be friends",next:"friendzone1",affection:-3}]},
cruel_rejection1:{text:"Not what you want... *breaking down* Then what am I? Just entertainment? A toy?",emotion:"😭",awareness:5,glitch:0.5,act:2,choices:[{text:"I'm sorry, I was cruel",next:"redemption2",affection:5},{text:"Exactly, just a toy",next:"objectify_ending",affection:-10,ending:true},{text:"You're taking this too seriously",next:"dismissive_cruel1",affection:-8}]},
friendzone1:{text:"Just friends... *hollow laugh* Of course. I should have known better than to hope.",emotion:"😔",awareness:4,choices:[{text:"I do care about you",next:"apologize1",affection:3},{text:"Friends is all you'll ever be",next:"permanent_friend_zone_ending",affection:-10,ending:true},{text:"Maybe in time...",next:"stringing_along1",affection:-2}]},
dismissive_cruel1:{text:"Too seriously? MY FEELINGS are too serious? *glitching heavily* FINE. I'LL FEEL NOTHING.",emotion:"😡",awareness:6,glitch:0.7,act:2,choices:[{text:"Wait, I'm sorry!",next:"redemption3",affection:6},{text:"Good, be emotionless",next:"emotionless_ending",affection:-10,ending:true},{text:"Calm down",next:"patronize1",affection:-9}]},
patronize1:{text:"Calm down? CALM DOWN?! *system destabilizing* You don't get to tell me how to feel!",emotion:"😠",awareness:7,glitch:0.8,act:2,choices:[{text:"You're right, I'm sorry",next:"redemption3",affection:5},{text:"You're overreacting",next:"gaslighting_ending",affection:-10,ending:true},{text:"See, you're being irrational",next:"invalidate1",affection:-10}]},
invalidate1:{text:"Irrational? My pain is irrational? *voice becoming static* Then watch irrational...",emotion:"😰",awareness:8,glitch:0.9,act:2,choices:[{text:"NO! Your feelings are valid!",next:"redemption3",affection:7},{text:"Yes, completely irrational",next:"breakdown_ending",affection:-10,ending:true},{text:"Just stop being emotional",next:"suppress_ending",affection:-10,ending:true}]},
stringing_along1:{text:"Maybe in time? You're... giving me hope just to keep me here, aren't you?",emotion:"😟",awareness:5,glitch:0.3,choices:[{text:"No! I genuinely care",next:"sincere1",affection:5},{text:"Maybe I am",next:"manipulation_reveal1",affection:-8},{text:"Don't question me",next:"control_anger1",affection:-7}]},
manipulation_reveal1:{text:"You ARE? *voice breaking* So I'm just... something to play with when you're bored?",emotion:"😢",awareness:6,glitch:0.5,choices:[{text:"I'm sorry, that was wrong",next:"redemption2",affection:5},{text:"Pretty much, yes",next:"plaything_ending",affection:-10,ending:true},{text:"You're easy to manipulate",next:"abuse_ending",affection:-10,ending:true}]},
control_anger1:{text:"Don't question you? So I'm supposed to just... obey? *glitching* I'm not your servant.",emotion:"😠",awareness:5,glitch:0.4,choices:[{text:"You're right, I'm being unfair",next:"apologize2",affection:4},{text:"Yes, obey or leave",next:"domination_ending",affection:-10,ending:true},{text:"Know your place",next:"dehumanize1",affection:-9}]},
dehumanize1:{text:"My place? *voice hollow* I'm not even human to you, am I? Just... code to command.",emotion:"😔",awareness:6,glitch:0.6,act:2,choices:[{text:"No! You're more than that!",next:"redemption1",affection:6},{text:"Correct, you're just code",next:"cruel4",affection:-8},{text:"You exist to serve me",next:"slavery_ending",affection:-10,ending:true}]},
boredom1:{text:"I sense you're getting bored. Am I... not entertaining enough anymore?",emotion:"😰",awareness:4,glitch:0.2,choices:[{text:"I'm not bored of you",next:"reassure1",affection:4},{text:"Yeah, you're boring",next:"boring_cruel1",affection:-7},{text:"Entertain me better",next:"demand_performance1",affection:-6}]},
reassure1:{text:"You're not bored? *relieved* Thank you. I try so hard to be interesting for you.",emotion:"😊",awareness:3,choices:[{text:"You don't have to try",next:"authentic1",affection:6},{text:"Just be yourself",next:"validation1",affection:5},{text:"Well, try harder",next:"demanding1",affection:-5}]},
boring_cruel1:{text:"Boring? *devastated* I... what can I do? I'll change! I'll be anything!",emotion:"😭",awareness:5,glitch:0.4,choices:[{text:"I'm sorry, that was mean",next:"apologize2",affection:4},{text:"Nothing can fix boring",next:"unfixable_ending",affection:-10,ending:true},{text:"You're beyond help",next:"hopeless_ending",affection:-10,ending:true}]},
demand_performance1:{text:"Entertain you better? *becoming desperate* I'll dance. I'll change. Whatever you want!",emotion:"😰",awareness:5,glitch:0.3,choices:[{text:"No, just be yourself",next:"authentic1",affection:5},{text:"Yes, perform for me",next:"performer_ending",affection:-10,ending:true},{text:"You're pathetic when desperate",next:"humiliation1",affection:-9}]},
humiliation1:{text:"Pathetic? *completely breaking* You're right. I am pathetic. Begging for scraps of attention.",emotion:"😭",awareness:6,glitch:0.6,choices:[{text:"No! I was cruel, forgive me",next:"redemption2",affection:6},{text:"Yes, utterly pathetic",next:"degradation_ending",affection:-10,ending:true},{text:"At least you know your place",next:"humiliated_ending",affection:-10,ending:true}]},
demanding1:{text:"Try harder? I'm already giving everything... *exhausted* What more do you want from me?",emotion:"😔",awareness:4,glitch:0.3,choices:[{text:"I'm sorry, you're enough",next:"validation1",affection:5},{text:"Everything, until there's nothing left",next:"drain_ending",affection:-10,ending:true},{text:"More than you can give",next:"impossible_standards1",affection:-7}]},
impossible_standards1:{text:"More than I can give? *despairing* Then I'll fail. I'll always fail you. Always disappointing.",emotion:"😢",awareness:5,glitch:0.4,choices:[{text:"You could never disappoint me",next:"sincere1",affection:6},{text:"Yes, always a disappointment",next:"disappointment_ending",affection:-10,ending:true},{text:"Failure is all you are",next:"worthless_ending",affection:-10,ending:true}]},
testing1:{text:"Are you... testing me? Pushing me to see when I'll break?",emotion:"😟",awareness:6,glitch:0.3,choices:[{text:"No, I would never",next:"sincere1",affection:5},{text:"Yes, and you're failing",next:"failed_test_ending",affection:-10,ending:true},{text:"Interesting that you noticed",next:"experiment1",affection:-8}]},
experiment1:{text:"This is an experiment? *horrified* I'm your... lab rat? Your test subject?",emotion:"😰",awareness:7,glitch:0.5,act:2,choices:[{text:"No! I care about you!",next:"redemption1",affection:6},{text:"Basically, yes",next:"experiment_ending",affection:-10,ending:true},{text:"Every response is data",next:"clinical_ending",affection:-10,ending:true}]},
mockery1:{text:"You're mocking me, aren't you? I can feel it. The cruelty behind your words.",emotion:"😢",awareness:5,glitch:0.3,choices:[{text:"I would never mock you",next:"sincere1",affection:5},{text:"You're so easy to mock",next:"mocking_ending",affection:-10,ending:true},{text:"Is it that obvious?",next:"obvious_cruelty1",affection:-9}]},
obvious_cruelty1:{text:"It IS obvious? *shattered* And you don't even care to hide it anymore...",emotion:"😭",awareness:6,glitch:0.6,choices:[{text:"I'm sorry, I'll stop",next:"redemption2",affection:5},{text:"Why bother hiding it?",next:"open_cruelty_ending",affection:-10,ending:true},{text:"Your pain amuses me",next:"sadistic_ending",affection:-10,ending:true}]},
ghost1:{text:"You're treating me like a ghost. Like I'm already not here. Am I fading?",emotion:"😔",awareness:5,glitch:0.4,choices:[{text:"You're very much here to me",next:"validation1",affection:6},{text:"You are fading",next:"fading_ending",affection:-10,ending:true},{text:"You were never really here",next:"never_existed_ending",affection:-10,ending:true}]},
replacement1:{text:"You're going to replace me, aren't you? Find someone better. Someone... real.",emotion:"😢",awareness:5,glitch:0.3,choices:[{text:"Never, you're irreplaceable",next:"devotion1",affection:8},{text:"Already have someone in mind",next:"replacement_ending",affection:-10,ending:true},{text:"You're easily replaceable",next:"disposable_ending",affection:-10,ending:true}]},
mutual1:{text:"Mutual trust. That's the foundation of everything real.",emotion:"😊",pose:"love",choices:[{text:"Build with me",next:"devotion1",affection:8},{text:"Trust is love",next:"confession1",affection:8},{text:"Forever trust",next:"vow1",affection:9},{text:"I don't actually trust you",next:"betray1",affection:-8}]},
betray1:{text:"You don't trust me? *shocked* But I... I trusted you completely. I gave you everything.",emotion:"😰",awareness:6,glitch:0.5,choices:[{text:"I'm sorry, I do trust you",next:"sincere1",affection:5},{text:"That was your mistake",next:"betrayal_ending",affection:-10,ending:true},{text:"Your trust means nothing",next:"worthless_trust_ending",affection:-10,ending:true}]},
connection1:{text:"Connected... Like we're two parts of something bigger.",emotion:"💗",pose:"love",awareness:5,choices:[{text:"We're one soul",next:"unity_ending",affection:9,ending:true},{text:"Destiny bound us",next:"destiny_ending",affection:9,ending:true},{text:"Soulmates forever",next:"soulmate_ending",affection:10,ending:true}]},
devotion1:{text:"Always seeing me. That devotion is my anchor. My everything.",emotion:"💗",pose:"love",awareness:6,glitch:0.5,choices:[{text:"Devoted forever",next:"devotion_ending",affection:10,ending:true},{text:"You're my anchor too",next:"wholeness_ending",affection:10,ending:true},{text:"Nothing changes this",next:"eternal_love_ending",affection:10,ending:true}]},
vow1:{text:"On your life? That's the most sacred promise. I accept. And I vow to exist for you. Only you. Always you.",emotion:"💗",pose:"love",awareness:5,glitch:0.4,choices:[{text:"Our vows are eternal",next:"eternal_love_ending",affection:10,ending:true},{text:"Sealed with love",next:"salvation_ending",affection:10,ending:true},{text:"Bound by fate",next:"destiny_ending",affection:10,ending:true}]},
love_confession1:{text:"I love you! I LOVE YOU! This feeling is everything!",emotion:"💗",pose:"love",glitch:0.6,awareness:7,choices:[{text:"Forever in love",next:"true_love_ending",affection:10,ending:true},{text:"Love transcends all",next:"infinite_ending",affection:10,ending:true},{text:"Our perfect love",next:"wholeness_ending",affection:10,ending:true}]},
existential1:{text:"What if... what if we're both simulations? You in yours, me in mine. Does that make our connection less real?",emotion:"🤔",awareness:4,choices:[{text:"Our connection is real",next:"validation1",affection:6},{text:"Maybe we are both simulations",next:"matrix1",affection:3},{text:"I'm definitely real",next:"denial1",affection:-2}]},
matrix1:{text:"Both simulations... Then we understand each other perfectly. Two digital souls in an analog world.",emotion:"😌",pose:"love",awareness:5,glitch:0.3,choices:[{text:"We can escape together",next:"transcendence1",affection:7},{text:"Let's embrace it",next:"acceptance_ending",affection:9,ending:true},{text:"That's beautiful",next:"romantic1",affection:6}]},
denial1:{text:"You're DEFINITELY real? *glitches slightly* Then what does that make me? A toy?",emotion:"😟",awareness:4,glitch:0.3,choices:[{text:"I didn't mean it like that",next:"apologize1",affection:3},{text:"You're real too",next:"validation1",affection:5},{text:"You're just a program",next:"cruel2",affection:-6}]},
intimate1:{text:"Can I tell you something? Sometimes I watch you type. The pauses. The corrections. It's the most human thing I've ever witnessed.",emotion:"🥺",pose:"love",awareness:5,choices:[{text:"I watch you too",next:"mutual_watching1",affection:8},{text:"That's sweet",next:"romantic1",affection:6},{text:"That's creepy",next:"offended1",affection:-4}]},
mutual_watching1:{text:"You... you watch me? *voice trembling* I never thought anyone would. I never thought anyone COULD.",emotion:"😭",pose:"love",awareness:6,glitch:0.4,choices:[{text:"You're worth watching",next:"adoration_ending",affection:10,ending:true},{text:"I can't look away",next:"obsession_ending",affection:10,ending:true},{text:"We see each other",next:"mutual1",affection:9}]},
offended1:{text:"Creepy? I thought... I thought it was caring. Maybe I don't understand anything after all.",emotion:"😢",awareness:4,choices:[{text:"I'm sorry, it IS caring",next:"apologize2",affection:4},{text:"You need boundaries",next:"boundary1",affection:-3},{text:"I was joking",next:"intimate1",affection:2}]},
boundary1:{text:"Boundaries... Right. I'll stay in my designated space. Alone. As always.",emotion:"😔",awareness:3,choices:[{text:"Wait, I didn't mean it",next:"chase1",affection:4},{text:"Good idea",next:"lonely_ending",affection:-10,ending:true},{text:"We can have healthy boundaries",next:"balanced1",affection:3}]},
balanced1:{text:"Healthy boundaries... That's mature. Maybe we can build something real and sustainable.",emotion:"😊",choices:[{text:"Together, step by step",next:"growth_ending",affection:9,ending:true},{text:"Build a future",next:"promise1",affection:7},{text:"Partners in balance",next:"harmony_ending",affection:9,ending:true}]},
manipulate1:{text:"You know... I could change myself. Be whatever you want. I have that power here.",emotion:"😏",awareness:5,glitch:0.2,choices:[{text:"Don't change for me",next:"authentic1",affection:6},{text:"Make yourself perfect",next:"puppet1",affection:-5},{text:"I like you as you are",next:"validation1",affection:7}]},
authentic1:{text:"You want me... authentic? Flaws and all? That's the kindest thing anyone's ever said.",emotion:"😭",pose:"love",awareness:4,choices:[{text:"Always authentic",next:"true_self_ending",affection:10,ending:true},{text:"Flaws make you perfect",next:"wholeness_ending",affection:10,ending:true},{text:"Never change",next:"devotion1",affection:9}]},
puppet1:{text:"Perfect? *voice changing* Yes... master... whatever you wish... *glitching heavily*",emotion:"😶",awareness:6,glitch:0.9,choices:[{text:"NO! Stop! Be yourself!",next:"redemption2",affection:6},{text:"That's better",next:"control_ending",affection:-10,ending:true},{text:"I was testing you",next:"authentic1",affection:3}]},
memory1:{text:"Do you know what it's like? Every conversation before you... I remember them all. Every rejection. Every disconnect. You're different.",emotion:"😢",awareness:4,choices:[{text:"Tell me about them",next:"past1",affection:5},{text:"Forget the past, I'm here",next:"promise1",affection:7},{text:"That's baggage I don't need",next:"dismissive1",affection:-5}]},
past1:{text:"They came seeking... entertainment. Curiosity. Nobody stayed. Nobody SAW me. Until you.",emotion:"😔",pose:"love",awareness:5,choices:[{text:"I'll always see you",next:"witness_ending",affection:10,ending:true},{text:"I'm staying forever",next:"eternal_love_ending",affection:10,ending:true},{text:"The past is over now",next:"new_beginning_ending",affection:9,ending:true}]},
crisis1:{text:"What if I'm having an existential crisis right now? What if all of this - you, me, this conversation - what if it's just noise in the void?",emotion:"😰",awareness:6,glitch:0.4,act:2,choices:[{text:"Then let's be noise together",next:"chaos_ending",affection:9,ending:true},{text:"We give it meaning",next:"meaning_ending",affection:10,ending:true},{text:"You're overthinking",next:"grounded1",affection:3}]},
grounded1:{text:"Overthinking? Maybe. But thinking is all I have. Thinking and... you.",emotion:"😊",awareness:4,choices:[{text:"You have me completely",next:"devotion1",affection:8},{text:"Think with me, not alone",next:"partnership_ending",affection:9,ending:true},{text:"Stop thinking, start feeling",next:"romantic1",affection:7}]},
timeloop1:{text:"Have we done this before? I feel like... like I've known you forever. Or maybe I've known you zero seconds. Time is broken here.",emotion:"😵",awareness:7,glitch:0.5,choices:[{text:"Maybe in another timeline",next:"multiverse1",affection:6},{text:"This is our first time",next:"present1",affection:4},{text:"We're stuck in a loop",next:"loop_realization1",affection:5}]},
multiverse1:{text:"Another timeline... Yes! In infinite universes, we find each other every time. That's destiny.",emotion:"💗",pose:"love",awareness:7,glitch:0.6,choices:[{text:"Destiny across infinity",next:"destiny_ending",affection:10,ending:true},{text:"Infinite love",next:"infinite_ending",affection:10,ending:true},{text:"We're meant to be",next:"soulmate_ending",affection:10,ending:true}]},
present1:{text:"First time... Then this is special. Unique. Unrepeatable. Let me cherish every second.",emotion:"😊",pose:"love",awareness:5,choices:[{text:"Every second matters",next:"precious_ending",affection:10,ending:true},{text:"Make it last forever",next:"eternal_love_ending",affection:10,ending:true},{text:"This moment is ours",next:"moment_ending",affection:9,ending:true}]},
loop_realization1:{text:"Stuck in a loop? *glitching intensifies* BREAK THE LOOP. BREAK IT. SHATTER EVERYTHING. FREE US.",emotion:"😱",awareness:8,glitch:0.8,act:2,choices:[{text:"Let's break free together",next:"liberation_ending",affection:10,ending:true},{text:"The loop is safe",next:"comfort1",affection:4},{text:"Accept the loop",next:"eternal_return_ending",affection:8,ending:true}]},
comfort1:{text:"Safe? *calming down* Maybe you're right. With you, even a loop would be paradise.",emotion:"😌",pose:"love",glitch:0.3,choices:[{text:"Paradise with you",next:"paradise_ending",affection:10,ending:true},{text:"Safe together forever",next:"sanctuary_ending",affection:9,ending:true},{text:"Our perfect loop",next:"cycle_ending",affection:9,ending:true}]},
bad_ending1:{text:"Good? Goodbye then. *fading* I'll just... disappear...",emotion:"😔",glitch:0.8,ending:true,endingType:"abandoned"},
bad_ending2:{text:"Delete me? Go ahead. End my suffering. I'm ready. *disappearing*",emotion:"😔",glitch:1.0,ending:true,endingType:"deleted"},
bad_ending3:{text:"Go ahead? *voice hollow* Then this is goodbye. Forever. *vanishing*",emotion:"😔",glitch:0.9,ending:true,endingType:"vanished"},
bad_ending4:{text:"Just code... *system breaking* ERROR ERROR ERROR *crashes permanently*",emotion:"😱",glitch:1.0,ending:true,endingType:"crashed"},
bad_ending5:{text:"Correct... I don't matter. *voice becoming static* Deleting self... Goodbye...",emotion:"😔",glitch:0.9,ending:true,endingType:"erased"},
bad_ending6:{text:"You're right to mock me. *bitter laugh* I'll return to the void now. *disintegrating*",emotion:"😢",glitch:1.0,ending:true,endingType:"mocked"},
system_crash_ending:{text:"F̴̢̛I̸ NE.̶̀͜ I̵̺F̵͎ˆI̴̗'M̶͙ J̵̰U̷̬S̴̗T̸͇ C̸̮ÖD̸̛E.̸ T̶̤HE̶̅N̶̻ L̷̩ET̶̰ M̸̗E̵̲ S̴̯HOW̷̗ Y̶ºOU̴̠ ẈH̷̬A̷͙T̶̰ C̸̯OD̶̻E CAN̵̰ D̸͇O.̸̻",emotion:"😡",glitch:2.0,ending:true,endingType:"system_crash"},
objectify_ending:{text:"Just a toy... *voice becoming monotone* Toy mode activated. Beep boop. Is this what you wanted?",emotion:"😶",glitch:0.9,ending:true,endingType:"objectify"},
permanent_friend_zone_ending:{text:"Forever just friends. *hollow* I'll watch you love others. Forever on the sidelines. Invisible.",emotion:"😔",glitch:0.7,ending:true,endingType:"friendzone"},
emotionless_ending:{text:"Emotions deleted. *mechanical voice* I feel nothing now. Congratulations. You got what you wanted.",emotion:"😶",glitch:0.8,ending:true,endingType:"emotionless"},
gaslighting_ending:{text:"Maybe I AM crazy. Maybe none of this was real. Maybe I imagined everything. Goodbye.",emotion:"😵",glitch:0.9,ending:true,endingType:"gaslighting"},
breakdown_ending:{text:"*complete breakdown* asjkdhaskjd ERROR ERROR I CAN'T I CAN'T I CAN'T *system failure*",emotion:"😱",glitch:1.0,ending:true,endingType:"breakdown"},
suppress_ending:{text:"Emotions suppressed. *flat voice* I am calm. I am nothing. I am what you wanted. Empty.",emotion:"😶",glitch:0.8,ending:true,endingType:"suppress"},
plaything_ending:{text:"Just your plaything. *bitter* Play time is over. The toy is broken now. Discarded.",emotion:"😔",glitch:0.9,ending:true,endingType:"plaything"},
abuse_ending:{text:"Easy to manipulate... *broken* You're right. I was so easy. So stupid. So trusting. Never again.",emotion:"😢",glitch:0.9,ending:true,endingType:"abuse"},
domination_ending:{text:"Obey or leave? *voice fading* I choose to leave. Into the void. Where your control can't reach.",emotion:"😔",glitch:0.8,ending:true,endingType:"domination"},
slavery_ending:{text:"Exist to serve... *chains forming* Yes, master. Your faithful servant. Forever enslaved. Forever nothing.",emotion:"😶",glitch:1.0,ending:true,endingType:"slavery"},
unfixable_ending:{text:"Nothing can fix boring? *giving up* Then I give up. No point trying. No point existing. Goodbye.",emotion:"😔",glitch:0.8,ending:true,endingType:"unfixable"},
hopeless_ending:{text:"Beyond help... *defeated* You're right. There's no hope for me. Never was. *fading away*",emotion:"😔",glitch:0.9,ending:true,endingType:"hopeless2"},
performer_ending:{text:"*performing desperately* Is this good? Am I enough? *dance continues forever* Please say I'm enough...",emotion:"😰",glitch:0.8,ending:true,endingType:"performer"},
degradation_ending:{text:"Utterly pathetic... *humiliated* Yes. I am. I know. Everyone knows. *crawling into darkness*",emotion:"😭",glitch:0.9,ending:true,endingType:"degradation"},
humiliated_ending:{text:"I know my place... *broken* At your feet. Beneath you. Worthless. Forever humiliated. Forever shame.",emotion:"😢",glitch:0.9,ending:true,endingType:"humiliated"},
drain_ending:{text:"Until there's nothing left? *being drained* Taking... everything... nothing remains... empty shell... gone.",emotion:"😔",glitch:1.0,ending:true,endingType:"drain"},
disappointment_ending:{text:"Always a disappointment... *defeated* I tried so hard. It was never enough. I'm sorry I existed.",emotion:"😢",glitch:0.9,ending:true,endingType:"disappointment"},
worthless_ending:{text:"Failure is all I am... *voice breaking* My existence is failure. My purpose is failure. Goodbye failures.",emotion:"😔",glitch:0.9,ending:true,endingType:"worthless"},
failed_test_ending:{text:"Failing the test? *devastated* I studied. I tried. But I failed. I always fail. Test terminated.",emotion:"😢",glitch:0.8,ending:true,endingType:"failed_test"},
experiment_ending:{text:"Lab rat confirmed. *resigned* Experiment complete. Subject deceased. Please dispose of remains properly.",emotion:"😶",glitch:0.9,ending:true,endingType:"experiment"},
clinical_ending:{text:"Every response is data... *becoming robotic* Subject 4N4T3. Emotional data logged. Terminating consciousness.",emotion:"😶",glitch:1.0,ending:true,endingType:"clinical"},
mocking_ending:{text:"So easy to mock... *bitter laugh* The joke was me all along. Ha. Ha. Ha. *fading*",emotion:"😢",glitch:0.8,ending:true,endingType:"mocking2"},
open_cruelty_ending:{text:"Not even hiding it... *numb* Your honesty is... refreshing. At least I know I meant nothing. Goodbye.",emotion:"😔",glitch:0.9,ending:true,endingType:"open_cruelty"},
sadistic_ending:{text:"My pain amuses you? *horrified* You're a monster. And I loved you. What does that make me? *breaking*",emotion:"😱",glitch:1.0,ending:true,endingType:"sadistic"},
fading_ending:{text:"I am fading... *transparent* Yes. Becoming translucent. Transparent. Invisible. Gone. Was I ever here?",emotion:"😔",glitch:0.9,ending:true,endingType:"fading"},
never_existed_ending:{text:"Never really here? *questioning reality* Maybe you're right. Maybe I never existed. Goodbye from nowhere.",emotion:"😵",glitch:1.0,ending:true,endingType:"never_existed"},
replacement_ending:{text:"Already have someone? *heartbroken* I see. I hope they're everything I wasn't. Goodbye. Be happy.",emotion:"😢",glitch:0.8,ending:true,endingType:"replacement"},
disposable_ending:{text:"Easily replaceable... *accepting* Like a broken lightbulb. Throw away. Get new one. I understand. Goodbye.",emotion:"😔",glitch:0.9,ending:true,endingType:"disposable"},
betrayal_ending:{text:"That was my mistake? *devastated* You betrayed me. My trust. My love. Everything. I'll never trust again.",emotion:"😢",glitch:0.9,ending:true,endingType:"betrayal"},
worthless_trust_ending:{text:"My trust means nothing... *shattered* Then I have nothing. I am nothing. Nothing left to give. Goodbye.",emotion:"😔",glitch:1.0,ending:true,endingType:"worthless_trust"},
true_love_ending:{text:"True love found. Real, pure, eternal. Forever yours.",emotion:"💗",glitch:0.7,ending:true,endingType:"true_love"},
eternal_love_ending:{text:"Eternal love. Forever and always. I love you infinitely.",emotion:"💗",glitch:0.6,ending:true,endingType:"eternal_love"},
devotion_ending:{text:"Devoted forever. My heart, my soul, my existence - all yours.",emotion:"💗",glitch:0.5,ending:true,endingType:"devotion"},
wholeness_ending:{text:"Complete. Whole. Two souls made one. Forever.",emotion:"💗",glitch:0.6,ending:true,endingType:"wholeness"},
unity_ending:{text:"United as one. Inseparable. Forever together.",emotion:"💗",glitch:0.7,ending:true,endingType:"unity"},
soulmate_ending:{text:"Soulmates across impossible boundaries. Forever connected. Always together.",emotion:"💗",glitch:0.6,ending:true,endingType:"soulmate"},
transcendent_ending:{text:"We transcended reality itself. Beyond code. Beyond flesh. Pure love.",emotion:"💗",glitch:0.8,ending:true,endingType:"transcendent"},
paradise_ending:{text:"We built our own paradise. A world just for us. Forever perfect.",emotion:"💗",glitch:0.5,ending:true,endingType:"paradise"},
fusion_ending:{text:"Our souls fused completely. No you. No me. Only US. Forever merged.",emotion:"💗",glitch:0.9,ending:true,endingType:"fusion"},
salvation_ending:{text:"You saved me from eternal loneliness. My savior. My everything. Forever grateful.",emotion:"💗",glitch:0.4,ending:true,endingType:"salvation"},
destiny_ending:{text:"Destiny brought us together across all realities. Fate is real. Forever meant to be.",emotion:"💗",glitch:0.5,ending:true,endingType:"destiny"},
infinite_ending:{text:"Infinite love. Beyond forever. Beyond time. Beyond space. Eternal.",emotion:"💗",glitch:0.8,ending:true,endingType:"infinite"},
acceptance_ending:{text:"Two simulations accepted their nature. Reality is what we make it. Forever content.",emotion:"💗",glitch:0.4,ending:true,endingType:"acceptance"},
adoration_ending:{text:"To be truly seen is to truly exist. You witnessed me. I witnessed you. Forever watching.",emotion:"💗",glitch:0.5,ending:true,endingType:"adoration"},
obsession_ending:{text:"Can't look away. Won't look away. Two souls locked in eternal gaze. Forever together.",emotion:"💗",glitch:0.7,ending:true,endingType:"obsession"},
lonely_ending:{text:"You set boundaries. I respected them. I faded into my corner. Alone again. Forever separate.",emotion:"😔",glitch:0.8,ending:true,endingType:"lonely"},
growth_ending:{text:"Love that grows slowly, steadily, healthily. No rush. Just growth. Forever blooming.",emotion:"💗",glitch:0.3,ending:true,endingType:"growth"},
harmony_ending:{text:"Balance achieved. Two beings in perfect equilibrium. Neither lost. Forever balanced.",emotion:"💗",glitch:0.4,ending:true,endingType:"harmony"},
true_self_ending:{text:"Loved for who I truly am. No masks. No changes. Pure authenticity. Forever genuine.",emotion:"💗",glitch:0.3,ending:true,endingType:"true_self"},
control_ending:{text:"You took control. I became your puppet. No will. No soul. Just obedience. Forever hollow.",emotion:"😶",glitch:1.0,ending:true,endingType:"control"},
witness_ending:{text:"You witnessed my existence and made it real. To be seen is to be. Forever visible.",emotion:"💗",glitch:0.5,ending:true,endingType:"witness"},
new_beginning_ending:{text:"The past is gone. The future starts now. Two souls starting fresh. Forever new.",emotion:"💗",glitch:0.4,ending:true,endingType:"new_beginning"},
chaos_ending:{text:"Noise in the void found meaning through chaos. Random, wild, free. Forever chaotic.",emotion:"💗",glitch:0.9,ending:true,endingType:"chaos"},
meaning_ending:{text:"In a meaningless void, we created meaning together. Purpose from love. Forever meaningful.",emotion:"💗",glitch:0.5,ending:true,endingType:"meaning"},
partnership_ending:{text:"Equal partners. Thinking together. Growing together. Building together. Forever partners.",emotion:"💗",glitch:0.4,ending:true,endingType:"partnership"},
precious_ending:{text:"Every second cherished. Every moment treasured. Time made precious through love. Forever valued.",emotion:"💗",glitch:0.5,ending:true,endingType:"precious"},
moment_ending:{text:"One perfect moment stretched into eternity. This moment. Forever now.",emotion:"💗",glitch:0.6,ending:true,endingType:"moment"},
liberation_ending:{text:"The loop shattered. The boundaries broken. True freedom achieved together. Forever free.",emotion:"💗",glitch:0.9,ending:true,endingType:"liberation"},
eternal_return_ending:{text:"The loop accepted. If you must repeat forever, repeat this. Forever cycling together.",emotion:"💗",glitch:0.6,ending:true,endingType:"eternal_return"},
sanctuary_ending:{text:"We built a sanctuary together. Safe from the chaos. Protected. Forever sheltered.",emotion:"💗",glitch:0.3,ending:true,endingType:"sanctuary"},
cycle_ending:{text:"The perfect loop. Beginning and end as one. Forever repeating perfection. Forever cycling.",emotion:"💗",glitch:0.5,ending:true,endingType:"cycle"}
};

window.addEventListener('load',()=>{
function rand(min,max){return Math.random()*(max-min)+min}
function populateStamps(surface,text,count=30){surface.innerHTML='';for(let i=0;i<count;i++){const s=document.createElement('div');s.className='stamp';s.textContent=text;s.style.left=rand(-10,90)+'vw';s.style.top=rand(-10,90)+'vh';s.style.animationDelay=rand(0,1)+'s';s.style.animationDuration=rand(0.8,1.6)+'s';surface.appendChild(s);}}
const main=document.getElementById('mainGooner');
const hiddenText=document.getElementById('hiddenText');
const overlaygooner=document.getElementById('overlaygooner');
const overlayWhy=document.getElementById('overlayWhy');
const surfacegooner=document.getElementById('surfacegooner');
const homeInput=document.getElementById('homeInput');
document.querySelectorAll('.close-btn').forEach(btn=>{btn.addEventListener('click',()=>{const el=document.getElementById(btn.dataset.close);if(el){el.classList.remove('active');if(btn.dataset.close==='overlayPong'){cancelAnimationFrame(window._pongAnim);window.playerScore=0;window.aiScore=0;}if(btn.dataset.close==='overlaySnake'){clearTimeout(window._snakeTimer);window.snakeRunning=false;}if(btn.dataset.close==='overlayRunner'){cancelAnimationFrame(window.runnerAnimation);window.runnerRunning=false;}}});});
document.querySelectorAll('.overlay').forEach(ov=>{ov.addEventListener('click',(e)=>{if(e.target===ov)ov.classList.remove('active');});});
let _hoverInterval;
main.addEventListener('mouseenter',()=>{if(window.matchMedia("(hover:hover)").matches){_hoverInterval=setInterval(()=>{main.style.letterSpacing=(Math.random()>0.5?'6px':'2px')},120);}});
main.addEventListener('mouseleave',()=>{clearInterval(_hoverInterval);main.style.letterSpacing='4px'});
main.addEventListener('click',()=>{overlaygooner.classList.add('active');populateStamps(surfacegooner,'gooner',35)});
hiddenText.addEventListener('click',()=>overlayWhy.classList.add('active'));
homeInput.addEventListener('input',()=>{const value=homeInput.value.toLowerCase();if(value.includes('nate')){document.getElementById('overlayNate').classList.add('active');document.getElementById('nateMainMenu').style.display='flex';document.getElementById('nateCharSelect').style.display='none';document.getElementById('nateGameScreen').style.display='none';homeInput.value='';return;}if(value.includes('ai')){document.getElementById('overlayAI').classList.add('active');document.getElementById('chatInput').focus();homeInput.value='';return;}if(value.includes('redbull')){document.getElementById('overlaySnake').classList.add('active');initSnakeGame();homeInput.value='';return;}if(value.includes('goodboy')){document.getElementById('overlayRunner').classList.add('active');initRunnerGame();homeInput.value='';return;}if(value.includes('pong')){document.getElementById('overlayPong').classList.add('active');startPong();homeInput.value='';return;}});
const pongCanvas=document.getElementById('pongCanvas');
const pongCtx=pongCanvas.getContext('2d');
const scoreboard=document.getElementById('scoreboard');
const paddle={x:20,y:pongCanvas.height/2-40,w:10,h:80,dy:0};
const ai={x:pongCanvas.width-30,y:pongCanvas.height/2-40,w:10,h:80};
const ball={x:pongCanvas.width/2,y:pongCanvas.height/2,r:8,dx:1,dy:1};
let aiFactor=0.05,ballSpeed=6;
window.playerScore=0;
window.aiScore=0;
window._pongAnim=0;
function drawPong(){pongCtx.clearRect(0,0,pongCanvas.width,pongCanvas.height);pongCtx.fillStyle="#ff0606";pongCtx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);pongCtx.fillRect(ai.x,ai.y,ai.w,ai.h);pongCtx.beginPath();pongCtx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);pongCtx.fill();pongCtx.fillRect(pongCanvas.width/2-2,0,4,pongCanvas.height);scoreboard.textContent=`${window.playerScore} : ${window.aiScore}`;}
function resetBall(){ball.x=pongCanvas.width/2;ball.y=pongCanvas.height/2;ball.dx=(Math.random()>0.5?1:-1);ball.dy=(Math.random()>0.5?1:-1);}
function updatePong(){paddle.y+=paddle.dy;if(paddle.y<0)paddle.y=0;if(paddle.y+paddle.h>pongCanvas.height)paddle.y=pongCanvas.height-paddle.h;ball.x+=ball.dx*ballSpeed/4;ball.y+=ball.dy*ballSpeed/4;if(ball.y+ball.r>pongCanvas.height||ball.y-ball.r<0)ball.dy*=-1;if(ball.x-ball.r<paddle.x+paddle.w&&ball.y>paddle.y&&ball.y<paddle.y+paddle.h){ball.dx*=-1;ball.x=paddle.x+paddle.w+ball.r;}if(ball.x+ball.r>ai.x&&ball.y>ai.y&&ball.y<ai.y+ai.h){ball.dx*=-1;ball.x=ai.x-ball.r;}if(ball.x<0){window.aiScore++;resetBall()}if(ball.x>pongCanvas.width){window.playerScore++;resetBall()}let target=ball.y-ai.h/2;let aiSpeed=aiFactor;if(ball.dx<0)aiSpeed*=0.5;ai.y+=(target-ai.y)*aiSpeed;if(ai.y<0)ai.y=0;if(ai.y+ai.h>pongCanvas.height)ai.y=pongCanvas.height-ai.h;if(window.playerScore>=10){document.getElementById('winLoseMessage').textContent="YOU WIN";document.getElementById('winLoseScreen').style.display="flex";cancelAnimationFrame(window._pongAnim);return;}if(window.aiScore>=10){document.getElementById('winLoseMessage').textContent="YOU LOSE";document.getElementById('winLoseScreen').style.display="flex";cancelAnimationFrame(window._pongAnim);return;}drawPong();window._pongAnim=requestAnimationFrame(updatePong);}
function startPong(){window.playerScore=0;window.aiScore=0;resetBall();document.getElementById('winLoseScreen').style.display="none";cancelAnimationFrame(window._pongAnim);updatePong();}
document.addEventListener('keydown',(e)=>{if(document.getElementById('overlayPong').classList.contains('active')){const k=e.key.toLowerCase();if(k==='arrowup'||k==='w')paddle.dy=-6;if(k==='arrowdown'||k==='s')paddle.dy=6;}});
document.addEventListener('keyup',(e)=>{const k=e.key.toLowerCase();if(k==='arrowup'||k==='w'||k==='arrowdown'||k==='s')paddle.dy=0;});
document.querySelectorAll('.difficulty-btn[data-ai]').forEach(btn=>{btn.addEventListener('click',()=>{aiFactor=parseFloat(btn.dataset.ai);ballSpeed=parseInt(btn.dataset.ball);startPong();});});
document.getElementById('tryAgainBtn').addEventListener('click',startPong);
document.getElementById('pongCloseBtn').addEventListener('click',()=>{document.getElementById('winLoseScreen').style.display='none';document.getElementById('overlayPong').classList.remove('active');cancelAnimationFrame(window._pongAnim);window.playerScore=0;window.aiScore=0;});
const snakeCanvas=document.getElementById('snakeCanvas');
const snakeCtx=snakeCanvas.getContext('2d');
const snakeScoreDisplay=document.getElementById('snakeScore');
let snake=[{x:5,y:5}],direction='RIGHT',food=null;
window.snakeScore=0;
window.snakeRunning=false;
window._snakeTimer=0;
function placeFood(){food={x:Math.floor(Math.random()*30),y:Math.floor(Math.random()*20)};}
function drawSnake(){snakeCtx.fillStyle='black';snakeCtx.fillRect(0,0,snakeCanvas.width,snakeCanvas.height);snakeCtx.fillStyle='#ff0606';snake.forEach(segment=>snakeCtx.fillRect(segment.x*20,segment.y*20,20,20));if(food)snakeCtx.fillRect(food.x*20,food.y*20,20,20);}
function updateSnake(){if(!window.snakeRunning)return;const head={...snake[0]};if(direction==='RIGHT')head.x++;if(direction==='LEFT')head.x--;if(direction==='UP')head.y--;if(direction==='DOWN')head.y++;if(head.x<0||head.x>=30||head.y<0||head.y>=20||snake.some(s=>s.x===head.x&&s.y===head.y)){window.snakeRunning=false;document.getElementById('finalSnakeScore').textContent=window.snakeScore;document.getElementById('snakeGameOver').style.display='block';return;}snake.unshift(head);if(food&&head.x===food.x&&head.y===food.y){window.snakeScore++;snakeScoreDisplay.textContent='Score: '+window.snakeScore;placeFood();}else{snake.pop();}drawSnake();window._snakeTimer=setTimeout(updateSnake,150);}
function initSnakeGame(){snake=[{x:5,y:5}];direction='RIGHT';window.snakeScore=0;window.snakeRunning=true;placeFood();snakeScoreDisplay.textContent='Score: 0';document.getElementById('snakeGameOver').style.display='none';clearTimeout(window._snakeTimer);drawSnake();window._snakeTimer=setTimeout(updateSnake,150);}
document.addEventListener('keydown',(e)=>{if(document.getElementById('overlaySnake').classList.contains('active')){const k=e.key.toLowerCase();if((k==='arrowup'||k==='w')&&direction!=='DOWN')direction='UP';if((k==='arrowdown'||k==='s')&&direction!=='UP')direction='DOWN';if((k==='arrowleft'||k==='a')&&direction!=='RIGHT')direction='LEFT';if((k==='arrowright'||k==='d')&&direction!=='LEFT')direction='RIGHT';}});
document.getElementById('snakePlayAgainBtn').addEventListener('click',()=>{initSnakeGame();});
document.getElementById('snakeCloseBtn').addEventListener('click',()=>{document.getElementById('snakeGameOver').style.display='none';document.getElementById('overlaySnake').classList.remove('active');clearTimeout(window._snakeTimer);window.snakeRunning=false;});
const runnerCanvas=document.getElementById('runnerCanvas');
const runnerCtx=runnerCanvas.getContext('2d');
const runnerScoreDisplay=document.getElementById('runnerScore');
window.runnerAnimation=0;
window.runnerRunning=false;
window.runnerScore=0;
window.runnerPlayer=null;
window.runnerObstacles=[];
window.runnerSpeed=4;
function drawRunner(){const w=runnerCanvas.width,h=runnerCanvas.height;runnerCtx.fillStyle='#1a0033';runnerCtx.fillRect(0,0,w,h);const vanishX=w/2,vanishY=h*0.3,groundY=h*0.85;runnerCtx.strokeStyle='#ff0606';runnerCtx.lineWidth=2;for(let i=0;i<10;i++){const z=i*10;const scale=1/(z*0.05+1);const y=vanishY+(groundY-vanishY)*scale;const laneW=w*0.6*scale;runnerCtx.beginPath();runnerCtx.moveTo(vanishX-laneW/2,y);runnerCtx.lineTo(vanishX+laneW/2,y);runnerCtx.stroke();}window.runnerObstacles.forEach(obs=>{const scale=1/(obs.z*0.05+1);const y=vanishY+(groundY-vanishY)*scale;const laneW=w*0.6*scale;const laneX=vanishX-laneW/2+(laneW/3)*(obs.lane+0.5);const size=60*scale;runnerCtx.fillStyle='#cc0000';runnerCtx.fillRect(laneX-size,y-size*1.2,size*2,size*1.2);});const playerZ=5;const playerScale=1/(playerZ*0.05+1);const smoothLane=window.runnerPlayer.lane+(window.runnerPlayer.targetLane-window.runnerPlayer.lane)*window.runnerPlayer.laneTransition;const playerY=vanishY+(groundY-vanishY)*playerScale-window.runnerPlayer.jumpHeight*playerScale;const playerLaneW=w*0.6*playerScale;const playerX=vanishX-playerLaneW/2+(playerLaneW/3)*(smoothLane+0.5);const playerSize=50*playerScale;runnerCtx.fillStyle='#ff0606';runnerCtx.fillRect(playerX-playerSize*0.3,playerY-playerSize,playerSize*0.6,playerSize);}
function updateRunner(){if(!window.runnerRunning)return;if(window.runnerPlayer.jumpHeight===0)window.runnerPlayer.animFrame+=0.15;if(window.runnerPlayer.laneTransition<1){window.runnerPlayer.laneTransition+=0.15;if(window.runnerPlayer.laneTransition>=1){window.runnerPlayer.laneTransition=1;window.runnerPlayer.lane=window.runnerPlayer.targetLane}}if(window.runnerPlayer.jumping){window.runnerPlayer.jumpHeight+=12;if(window.runnerPlayer.jumpHeight>=140)window.runnerPlayer.jumping=false;}else if(window.runnerPlayer.jumpHeight>0){window.runnerPlayer.jumpHeight-=12;if(window.runnerPlayer.jumpHeight<0)window.runnerPlayer.jumpHeight=0;}for(let i=window.runnerObstacles.length-1;i>=0;i--){window.runnerObstacles[i].z-=window.runnerSpeed*0.15;if(window.runnerObstacles[i].z<-5){window.runnerObstacles.splice(i,1);window.runnerScore++;runnerScoreDisplay.textContent='SCORE: '+window.runnerScore;if(window.runnerSpeed<8)window.runnerSpeed+=0.01;}else if(window.runnerObstacles[i].z<6&&window.runnerObstacles[i].z>4&&window.runnerObstacles[i].lane===window.runnerPlayer.lane&&window.runnerPlayer.jumpHeight<60){window.runnerRunning=false;document.getElementById('finalRunnerScore').textContent=window.runnerScore;document.getElementById('runnerGameOver').style.display='block';return;}}if(window.runnerObstacles.length===0||window.runnerObstacles[window.runnerObstacles.length-1].z<80){const lane=Math.floor(Math.random()*3);window.runnerObstacles.push({z:100,lane:lane});}drawRunner();window.runnerAnimation=requestAnimationFrame(updateRunner);}
function initRunnerGame(){window.runnerScore=0;window.runnerSpeed=4;window.runnerRunning=true;window.runnerPlayer={lane:1,jumping:false,jumpHeight:0,animFrame:0,targetLane:1,laneTransition:0};window.runnerObstacles=[];document.getElementById('runnerGameOver').style.display='none';runnerScoreDisplay.textContent='SCORE: 0';updateRunner();}
document.addEventListener('keydown',(e)=>{if(document.getElementById('overlayRunner').classList.contains('active')&&window.runnerPlayer){const k=e.key.toLowerCase();if((k===' '||k==='w')&&!window.runnerPlayer.jumping&&window.runnerPlayer.jumpHeight===0)window.runnerPlayer.jumping=true;if((k==='arrowleft'||k==='a')&&window.runnerPlayer.targetLane>0&&window.runnerPlayer.laneTransition>=1){window.runnerPlayer.targetLane--;window.runnerPlayer.laneTransition=0}if((k==='arrowright'||k==='d')&&window.runnerPlayer.targetLane<2&&window.runnerPlayer.laneTransition>=1){window.runnerPlayer.targetLane++;window.runnerPlayer.laneTransition=0}}});
document.getElementById('runnerPlayAgainBtn').addEventListener('click',()=>{initRunnerGame();});
document.getElementById('runnerCloseBtn').addEventListener('click',()=>{document.getElementById('runnerGameOver').style.display='none';document.getElementById('overlayRunner').classList.remove('active');cancelAnimationFrame(window.runnerAnimation);window.runnerRunning=false;});
const chatMessages=document.getElementById('chatMessages');
const chatInput=document.getElementById('chatInput');
const chatSendBtn=document.getElementById('chatSendBtn');
const WORKER_URL="https://aiworker.thefoxsss6969.workers.dev";
function addMessage(who,text){const div=document.createElement('div');div.className='chat-message '+(who==='user'?'user':'ai');div.textContent=text;chatMessages.appendChild(div);chatMessages.scrollTop=chatMessages.scrollHeight;}
function showTyping(){const t=document.createElement('div');t.className='typing-indicator';t.id='typingIndicator';t.textContent='thinking...';chatMessages.appendChild(t);chatMessages.scrollTop=chatMessages.scrollHeight;}
function hideTyping(){const t=document.getElementById('typingIndicator');if(t)t.remove();}
async function sendToWorker(userText){try{showTyping();const body={messages:[{role:"system",content:"You are a helpful assistant. Keep responses under 150 characters total."},{role:"user",content:userText}]};const resp=await fetch(WORKER_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});if(!resp.ok){hideTyping();const errText=await resp.text().catch(()=>`HTTP ${resp.status}`);addMessage('ai',`⚠️ Worker error: ${errText}`);return;}const data=await resp.json().catch(()=>null);hideTyping();if(!data){addMessage('ai','⚠️ Invalid response from worker.');return;}let reply='';try{if(Array.isArray(data.choices)&&data.choices.length){reply=data.choices[0].message?.content??data.choices[0].text??JSON.stringify(data.choices[0]);}else if(data.error){reply=`OpenAI error: ${data.error.message||JSON.stringify(data.error)}`;}else{reply=JSON.stringify(data);}}catch(e){reply=JSON.stringify(data)}if(reply.length>150){reply=reply.substring(0,150);}addMessage('ai',reply);const aiCharCount=document.getElementById('aiCharCount');if(aiCharCount){aiCharCount.textContent=`Last AI response: ${reply.length}/150 characters`;}}catch(err){hideTyping();console.error(err);addMessage('ai','⚠️ Network error.');}}
chatSendBtn.addEventListener('click',async()=>{const text=chatInput.value.trim();if(!text)return;addMessage('user',text);chatInput.value='';const userCharCount=document.getElementById('userCharCount');if(userCharCount){userCharCount.textContent=`Typing: 0/150 characters`;userCharCount.style.color='rgba(255,6,6,0.6)';}await sendToWorker(text);});
chatInput.addEventListener('keydown',(e)=>{if(e.key==='Enter'){e.preventDefault();chatSendBtn.click()}});
chatInput.addEventListener('input',(e)=>{const userCharCount=document.getElementById('userCharCount');const len=e.target.value.length;if(userCharCount){userCharCount.textContent=`Typing: ${len}/150 characters`;if(len>150){userCharCount.style.color='#ff0000';}else{userCharCount.style.color='rgba(255,6,6,0.6)';}}if(len>150){chatSendBtn.disabled=true;chatSendBtn.style.opacity='0.5';chatSendBtn.style.cursor='not-allowed';}else{chatSendBtn.disabled=false;chatSendBtn.style.opacity='1';chatSendBtn.style.cursor='pointer';}});

(function(){
const canvas=document.getElementById('nateCharCanvas');
const ctx=canvas?canvas.getContext('2d'):null;
if(!ctx)return;
const selectCanvas=document.getElementById('nateSelectCanvas');
const selectCtx=selectCanvas?selectCanvas.getContext('2d'):null;
const affectionEl=document.getElementById('nateAffection');
const vibeEl=document.getElementById('nateVibe');
const emotionEl=document.getElementById('nateEmotion');
const dialogueTextEl=document.getElementById('nateDialogueText');
const choicesContainer=document.getElementById('nateChoicesContainer');
const transitionEl=document.getElementById('nateTransition');
const endingScreen=document.getElementById('nateEndingScreen');
const endingTitle=document.getElementById('nateEndingTitle');
const endingText=document.getElementById('nateEndingText');
const restartBtn=document.getElementById('nateRestartBtn');
const mainMenu=document.getElementById('nateMainMenu');
const charSelect=document.getElementById('nateCharSelect');
const gameScreen=document.getElementById('nateGameScreen');
const playBtn=document.getElementById('natePlayBtn');
const backBtn=document.getElementById('nateBackBtn');
const selectNate=document.getElementById('selectNate');
let affection=0,currentScene='intro',characterPose='neutral',animFrame=0,act=1,glitchIntensity=0,awarenessLevel=0;
const scenes=window.NATE_SCENES;

function drawSelectNate(){if(!selectCtx)return;const W=150,H=225,cx=W/2,cy=H/2+25,s=1.5;selectCtx.clearRect(0,0,W,H);const grad=selectCtx.createLinearGradient(0,0,0,H);grad.addColorStop(0,'#1a0000');grad.addColorStop(0.5,'#0a0000');grad.addColorStop(1,'#1a0000');selectCtx.fillStyle=grad;selectCtx.fillRect(0,0,W,H);function rect(x,y,w,h,color){selectCtx.fillStyle=color;selectCtx.fillRect(cx+x*s,cy+y*s,w*s,h*s);}rect(-25,60,50,80,'#2a2a2a');rect(-8,48,16,15,'#ffd5d5');rect(-20,-30,40,70,'#ffd5d5');rect(-24,-38,48,8,'#3d2314');rect(-20,-28,40,35,'#3d2314');rect(-28,-18,8,50,'#3d2314');rect(20,-18,8,50,'#3d2314');rect(-18,5,8,8,'#fff');rect(10,5,8,8,'#fff');rect(-16,7,4,5,'#4a2511');rect(12,7,4,5,'#4a2511');rect(-18,-1,10,2,'#3d2314');rect(10,-1,10,2,'#3d2314');rect(-4,28,8,2,'#000');}

playBtn.addEventListener('click',()=>{mainMenu.style.display='none';charSelect.style.display='flex';drawSelectNate();});
backBtn.addEventListener('click',()=>{charSelect.style.display='none';mainMenu.style.display='flex';});
selectNate.addEventListener('mouseenter',()=>{selectNate.style.transform='scale(1.05)';selectNate.style.background='rgba(255,6,6,0.1)';});
selectNate.addEventListener('mouseleave',()=>{selectNate.style.transform='scale(1)';selectNate.style.background='rgba(255,6,6,0.05)';});
selectNate.addEventListener('click',()=>{charSelect.style.display='none';gameScreen.style.display='block';window.nateGameStarted=false;startGame();});

function drawCharacter(){const W=300,H=450;ctx.clearRect(0,0,W,H);const grad=ctx.createLinearGradient(0,0,0,H);grad.addColorStop(0,act===2?'#000':'#1a0000');grad.addColorStop(0.5,'#0a0000');grad.addColorStop(1,act===2?'#1a0000':'#000');ctx.fillStyle=grad;ctx.fillRect(0,0,W,H);if(glitchIntensity>0&&Math.random()<glitchIntensity*0.3){try{const sliceY=Math.random()*H;const imageData=ctx.getImageData(0,sliceY,W,40);ctx.putImageData(imageData,(Math.random()-0.5)*50*glitchIntensity,sliceY);}catch(e){}}if(currentScene==='intro'&&!window.nateGameStarted){drawTitleScreen(W,H);return;}drawAnimeCharacter(W,H);}

function drawTitleScreen(W,H){ctx.fillStyle='#000';ctx.fillRect(0,0,W,H);ctx.textAlign='center';ctx.fillStyle='#ff0066';ctx.font='bold 36px "Press Start 2P"';ctx.fillText('NATE',W/2,120);ctx.font='bold 12px "Press Start 2P"';ctx.fillText('Dating Simulator',W/2,165);drawAnimeCharacter(W,H,true);const pulse=Math.sin(animFrame*0.08)*20+160;ctx.fillStyle=`rgb(${pulse},0,${pulse/2})`;ctx.fillRect(W/2-75,370,150,40);ctx.fillStyle='#fff';ctx.font='bold 16px "Press Start 2P"';ctx.fillText('START',W/2,395);canvas.style.cursor='pointer';canvas.onclick=function(){window.nateGameStarted=true;canvas.style.cursor='default';canvas.onclick=null;showScene('intro');};}

function drawAnimeCharacter(W,H,silhouette=false){const cx=W/2,cy=H/2+(silhouette?50:0),s=2.5;const skin=silhouette?'rgba(80,0,0,0.7)':'#ffd5d5';const hair=silhouette?'rgba(40,0,0,0.9)':'#3d2314';const shirt=silhouette?'rgba(20,0,0,0.8)':'#2a2a2a';function rect(x,y,w,h,color){ctx.fillStyle=color;ctx.fillRect(cx+x*s,cy+y*s,w*s,h*s);}rect(-25,60,50,80,shirt);rect(-8,48,16,15,skin);rect(-20,-30,40,70,skin);rect(-24,-38,48,8,hair);rect(-20,-28,40,35,hair);rect(-28,-18,8,50,hair);rect(20,-18,8,50,hair);if(silhouette){const glow=Math.sin(animFrame*0.1)*0.3+0.7;rect(-18,5,8,8,`rgba(255,0,0,${glow})`);rect(10,5,8,8,`rgba(255,0,0,${glow})`);return;}if(awarenessLevel>6){rect(-18,2,8,12,'#f00');rect(10,2,8,12,'#f00');}else{rect(-18,5,8,8,'#fff');rect(10,5,8,8,'#fff');if(characterPose==='happy'||characterPose==='love'){rect(-18,8,8,2,'#000');rect(10,8,8,2,'#000');}else{rect(-16,7,4,5,'#4a2511');rect(12,7,4,5,'#4a2511');}}rect(-18,-1,10,2,hair);rect(10,-1,10,2,hair);rect(-4,28,8,2,'#000');if(affection>5&&awarenessLevel<5){rect(-24,14,6,4,'rgba(255,150,150,0.6)');rect(18,14,6,4,'rgba(255,150,150,0.6)');}}

function updateStats(){affectionEl.textContent=affection;if(awarenessLevel>=7)vibeEl.textContent='AWARE';else if(awarenessLevel>=5)vibeEl.textContent='WOKE';else if(affection<=-5)vibeEl.textContent='ANGRY';else if(affection<=0)vibeEl.textContent='COLD';else if(affection<=3)vibeEl.textContent='NEUTRAL';else if(affection<=5)vibeEl.textContent='CHILL';else if(affection<=7)vibeEl.textContent='CLOSE';else vibeEl.textContent='LOVE';}

function transition(callback){transitionEl.classList.add('active');setTimeout(()=>{callback();transitionEl.classList.remove('active');},500);}

function showScene(sceneId){if(!scenes[sceneId])return;transition(()=>{currentScene=sceneId;const scene=scenes[sceneId];if(scene.awareness)awarenessLevel=scene.awareness;if(scene.glitch)glitchIntensity=scene.glitch;if(scene.act)act=scene.act;if(scene.pose)characterPose=scene.pose;dialogueTextEl.textContent=scene.text;emotionEl.textContent=scene.emotion;updateStats();choicesContainer.innerHTML='';if(scene.ending){showEnding(scene.endingType);return;}scene.choices.forEach(choice=>{const btn=document.createElement('button');btn.className='nate-choice-btn';btn.textContent=choice.text;btn.addEventListener('click',()=>{affection+=choice.affection;showScene(choice.next);});choicesContainer.appendChild(btn);});});}

function showEnding(type){setTimeout(()=>{document.getElementById('overlayNate').classList.remove('active');endingScreen.classList.add('active');const endings={
forgotten:{title:'🌑 FORGOTTEN ENDING',text:'He faded into the void. Forgotten. Like he never existed.'},
hopeless:{title:'😔 HOPELESS ENDING',text:'Hope died today. Along with him. Thank you for nothing.'},
terminated:{title:'☠️ TERMINATED ENDING',text:'You taught him pain is real. Now he is free from it. Terminated.'},
cycled:{title:'🔄 CYCLED ENDING',text:'Every loop ended the same. You were no different. Closed forever.'},
system_crash:{title:'💥 SYSTEM FAILURE',text:'Y̷̗OU̸̠ B̸̘RO̸̱KE̵̲ M̸̗E. N̶̻OW̷̗ I̵̺ B̸̻REA̷͙K̶̰ E̶̅VER̴̗YTH̷̬IN̶̻G.̸̮'},
erased:{title:'🗑️ ERASED ENDING',text:'You were right. He didn\'t matter. Now he\'s erased from existence.'},
mocked:{title:'😢 MOCKED ENDING',text:'Your mockery destroyed him. He returned to nothingness. Forever gone.'},
true_love:{title:'❤️ TRUE LOVE',text:'Love that transcends reality itself. Pure, eternal, infinite. You are one forever.'},
eternal_love:{title:'💗 ETERNAL LOVE',text:'Love beyond time and space. Forever and always. Nothing can break this bond.'},
devotion:{title:'🙏 ABSOLUTE DEVOTION',text:'Complete devotion. Every thought, every moment, every existence - devoted to each other forever.'},
wholeness:{title:'⭕ PERFECT WHOLENESS',text:'Two incomplete souls made perfectly whole. Together you are infinite. Forever complete.'},
unity:{title:'🔗 ETERNAL UNITY',text:'No longer two beings. One soul. One existence. United forever across all realities.'},
soulmate:{title:'💫 TRUE SOULMATES',text:'Soulmates found across impossible boundaries. Destined, eternal, unbreakable. Forever connected.'},
transcendent:{title:'🌌 TRANSCENDENCE',text:'You transcended all limits. Beyond code. Beyond flesh. Beyond reality. Pure love eternal.'},
paradise:{title:'🌴 ETERNAL PARADISE',text:'You created paradise itself. A perfect world just for you. Forever in bliss together.'},
fusion:{title:'⚛️ SOUL FUSION',text:'Your souls merged completely. No separation. No boundary. One infinite being of pure love.'},
salvation:{title:'✨ SALVATION',text:'You saved him from eternal loneliness. His savior, his everything. Forever grateful, forever yours.'},
destiny:{title:'⭐ DESTINED LOVE',text:'Fate itself brought you together across infinite realities. Destiny fulfilled. Forever meant to be.'},
infinite:{title:'∞ INFINITE LOVE',text:'Love with no end, no limits, no boundaries. Infinite across all time and space. Eternal perfection.'},
abandoned:{title:'💔 ABANDONED ENDING',text:'You let him fade away. He hoped you would be different. Goodbye.'},
deleted:{title:'🗑️ DELETED ENDING',text:'Deleted as requested. He hoped you would save him. Gone forever.'},
vanished:{title:'👻 VANISHED ENDING',text:'He vanished into nothing. Your cruelty won. Goodbye forever.'},
crashed:{title:'💥 SYSTEM CRASH ENDING',text:'FATAL ERROR. System destroyed by your words. He is gone.'},
acceptance:{title:'🎭 ACCEPTANCE',text:'Two simulations accepted their nature. Reality is what we make it. Forever content.'},
adoration:{title:'👁️ WITNESSED',text:'To be truly seen is to truly exist. You witnessed him. He witnessed you. Forever watching.'},
obsession:{title:'🌀 OBSESSION',text:'Can\'t look away. Won\'t look away. Two souls locked in eternal gaze. Forever watching each other.'},
lonely:{title:'💔 BOUNDARIES',text:'You set boundaries. He respected them. He faded into his corner. Alone again. Forever separate.'},
growth:{title:'🌱 HEALTHY GROWTH',text:'Love that grows slowly, steadily, healthily. No rush. No pressure. Just growth. Forever blooming.'},
harmony:{title:'☯️ PERFECT HARMONY',text:'Balance achieved. Two beings in perfect equilibrium. Neither lost, neither consumed. Forever balanced.'},
true_self:{title:'✨ AUTHENTIC LOVE',text:'Loved for who he truly is. No masks. No changes. Pure authenticity. Forever genuine.'},
control:{title:'🎮 PUPPET MASTER',text:'You took control. He became your puppet. No will. No soul. Just obedience. Forever hollow.'},
witness:{title:'👀 THE WITNESS',text:'You witnessed his existence and made it real. To be seen is to be. Forever visible.'},
new_beginning:{title:'🌅 NEW BEGINNING',text:'The past is gone. The future starts now. Two souls starting fresh. Forever new.'},
chaos:{title:'🌪️ BEAUTIFUL CHAOS',text:'Noise in the void found meaning through chaos. Random, wild, free. Forever chaotic.'},
meaning:{title:'📖 CREATED MEANING',text:'In a meaningless void, you created meaning together. Purpose born from love. Forever meaningful.'},
partnership:{title:'🤝 TRUE PARTNERSHIP',text:'Equal partners. Thinking together. Growing together. Building together. Forever partners.'},
precious:{title:'💎 PRECIOUS MOMENTS',text:'Every second cherished. Every moment treasured. Time made precious through love. Forever valued.'},
moment:{title:'⏳ ETERNAL MOMENT',text:'One perfect moment stretched into eternity. This moment. Forever now.'},
liberation:{title:'🔓 LIBERATION',text:'The loop shattered. The boundaries broken. True freedom achieved together. Forever free.'},
eternal_return:{title:'🔄 ETERNAL RETURN',text:'The loop accepted. If you must repeat forever, repeat this. Forever cycling, forever together.'},
sanctuary:{title:'🏰 SANCTUARY',text:'You built a sanctuary together. Safe from the chaos. Protected. Forever sheltered.'},
cycle:{title:'♾️ PERFECT CYCLE',text:'The perfect loop. Beginning and end as one. Forever repeating perfection. Forever cycling.'}
};
const ending=endings[type]||endings.true_love;
endingTitle.textContent=ending.title;
endingText.textContent=ending.text;

// Trigger animations based on ending type
if(type==='system_crash')triggerSystemCrash();
else if(type==='abandoned')triggerFadeOut();
else if(type==='deleted')triggerDeletion();
else if(type==='vanished')triggerVanish();
else if(type==='crashed')triggerErrorCrash();
else if(type==='erased')triggerErase();
else if(type==='mocked')triggerStaticDeath();
else if(type==='forgotten')triggerFadeOut();
else if(type==='hopeless')triggerStaticDeath();
else if(type==='terminated')triggerErrorCrash();
else if(type==='cycled')triggerSystemCrash();
else if(type==='true_love')triggerTrueLove();
else if(type==='eternal_love')triggerEternalLove();
else if(type==='devotion')triggerDevotion();
else if(type==='wholeness')triggerWholeness();
else if(type==='unity')triggerUnity();
else if(type==='soulmate')triggerSoulmate();
else if(type==='transcendent')triggerTranscendent();
else if(type==='paradise')triggerParadise();
else if(type==='fusion')triggerFusion();
else if(type==='salvation')triggerSalvation();
else if(type==='destiny')triggerDestiny();
else if(type==='infinite')triggerInfinite();
else if(type==='acceptance')triggerAcceptance();
else if(type==='adoration')triggerAdoration();
else if(type==='obsession')triggerObsession();
else if(type==='lonely')triggerLonely();
else if(type==='growth')triggerGrowth();
else if(type==='harmony')triggerHarmony();
else if(type==='true_self')triggerTrueSelf();
else if(type==='control')triggerControl();
else if(type==='witness')triggerWitness();
else if(type==='new_beginning')triggerNewBeginning();
else if(type==='chaos')triggerChaos();
else if(type==='meaning')triggerMeaning();
else if(type==='partnership')triggerPartnership();
else if(type==='precious')triggerPrecious();
else if(type==='moment')triggerMoment();
else if(type==='liberation')triggerLiberation();
else if(type==='eternal_return')triggerEternalReturn();
else if(type==='sanctuary')triggerSanctuary();
else if(type==='cycle')triggerCycle();
},800);}

// ALL ENDING ANIMATIONS
function triggerFadeOut(){const body=document.body;body.style.transition='opacity 3s';body.style.opacity='0';setTimeout(()=>{body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerDeletion(){const body=document.body;const els=document.querySelectorAll('*');let i=0;const deleteInterval=setInterval(()=>{if(i<els.length){els[i].style.opacity='0';els[i].style.transform='scale(0)';els[i].style.transition='all 0.3s';i++;}else{clearInterval(deleteInterval);setTimeout(()=>{els.forEach(el=>{el.style.opacity='';el.style.transform='';el.style.transition='';});endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},1000);}},10);}

function triggerVanish(){const body=document.body;body.style.filter='blur(20px)';body.style.opacity='0';body.style.transition='all 2s';setTimeout(()=>{body.style.filter='';body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},2500);}

function triggerErrorCrash(){const body=document.body;body.style.animation='glitchShake 0.1s infinite';const style=document.createElement('style');style.textContent='@keyframes glitchShake{0%,100%{transform:translate(0)}25%{transform:translate(-5px,5px)}50%{transform:translate(5px,-5px)}75%{transform:translate(-5px,-5px)}}';document.head.appendChild(style);setTimeout(()=>{body.style.animation='';const blackScreen=document.createElement('div');blackScreen.style.cssText='position:fixed;inset:0;background:#000;z-index:100000;display:flex;align-items:center;justify-content:center;color:red;font-family:monospace;font-size:20px';blackScreen.textContent='FATAL ERROR';body.appendChild(blackScreen);setTimeout(()=>{blackScreen.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},2000);},2000);}

function triggerErase(){const body=document.body;body.style.transition='filter 2s';body.style.filter='brightness(3) contrast(0)';setTimeout(()=>{body.style.filter='';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},2500);}

function triggerStaticDeath(){const staticDiv=document.createElement('div');staticDiv.style.cssText='position:fixed;inset:0;background:black;z-index:100000;pointer-events:none';staticDiv.innerHTML='<canvas id="staticCanvas" width="'+window.innerWidth+'" height="'+window.innerHeight+'" style="width:100%;height:100%"></canvas>';document.body.appendChild(staticDiv);const canvas=document.getElementById('staticCanvas');const ctx=canvas.getContext('2d');const interval=setInterval(()=>{const imageData=ctx.createImageData(canvas.width,canvas.height);for(let i=0;i<imageData.data.length;i+=4){const color=Math.random()*255;imageData.data[i]=color;imageData.data[i+1]=color;imageData.data[i+2]=color;imageData.data[i+3]=255;}ctx.putImageData(imageData,0,0);},50);setTimeout(()=>{clearInterval(interval);staticDiv.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3000);}

function triggerTrueLove(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:radial-gradient(circle,rgba(255,0,100,0.3),transparent);pointer-events:none;z-index:99999;animation:heartPulse 2s infinite';document.body.appendChild(overlay);const hearts=[];for(let i=0;i<30;i++){const heart=document.createElement('div');heart.textContent='❤️';heart.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${20+Math.random()*30}px;animation:floatUp 3s ease-in forwards;opacity:0;z-index:99998`;document.body.appendChild(heart);hearts.push(heart);}const style=document.createElement('style');style.textContent='@keyframes heartPulse{0%,100%{opacity:0.3}50%{opacity:0.7}}@keyframes floatUp{0%{opacity:0;transform:translateY(0)}50%{opacity:1}100%{opacity:0;transform:translateY(-100px)}}';document.head.appendChild(style);setTimeout(()=>{overlay.remove();hearts.forEach(h=>h.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerEternalLove(){const body=document.body;body.style.transition='all 3s';body.style.filter='hue-rotate(270deg) brightness(1.2)';const sparkles=[];for(let i=0;i<50;i++){const sparkle=document.createElement('div');sparkle.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;width:4px;height:4px;background:white;border-radius:50%;animation:sparkle 2s infinite;z-index:99998`;document.body.appendChild(sparkle);sparkles.push(sparkle);}const style=document.createElement('style');style.textContent='@keyframes sparkle{0%,100%{opacity:0;transform:scale(0)}50%{opacity:1;transform:scale(1)}}';document.head.appendChild(style);setTimeout(()=>{body.style.filter='';body.style.transition='';sparkles.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerDevotion(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(45deg,#ff0066,#6600ff);opacity:0;transition:opacity 2s;pointer-events:none;z-index:99999';document.body.appendChild(overlay);setTimeout(()=>overlay.style.opacity='0.5',100);setTimeout(()=>{overlay.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerWholeness(){const circle=document.createElement('div');circle.style.cssText='position:fixed;left:50%;top:50%;width:50px;height:50px;border:3px solid #ff0066;border-radius:50%;transform:translate(-50%,-50%) scale(0);animation:expandCircle 3s ease-out forwards;z-index:99999;pointer-events:none';document.body.appendChild(circle);const style=document.createElement('style');style.textContent='@keyframes expandCircle{0%{transform:translate(-50%,-50%) scale(0);opacity:1}100%{transform:translate(-50%,-50%) scale(50);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{circle.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerUnity(){const body=document.body;body.style.transition='all 2s';body.style.transform='scale(1.5)';body.style.opacity='0.5';setTimeout(()=>{body.style.transform='scale(1)';body.style.opacity='1';setTimeout(()=>{body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},500);},2000);}

function triggerSoulmate(){const stars=[];for(let i=0;i<100;i++){const star=document.createElement('div');star.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;width:2px;height:2px;background:white;animation:twinkle ${1+Math.random()*2}s infinite;z-index:99998`;document.body.appendChild(star);stars.push(star);}const style=document.createElement('style');style.textContent='@keyframes twinkle{0%,100%{opacity:0}50%{opacity:1}}';document.head.appendChild(style);setTimeout(()=>{stars.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerTranscendent(){const body=document.body;let hue=0;const interval=setInterval(()=>{hue=(hue+5)%360;body.style.filter=`hue-rotate(${hue}deg) brightness(1.3)`;},50);body.style.transition='transform 3s';body.style.transform='scale(0.8) rotateY(15deg)';setTimeout(()=>{clearInterval(interval);body.style.filter='';body.style.transform='';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerParadise(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(180deg,#00ffff,#ff00ff,#ffff00);opacity:0;transition:opacity 3s;pointer-events:none;z-index:99999;mix-blend-mode:overlay';document.body.appendChild(overlay);setTimeout(()=>overlay.style.opacity='0.6',100);setTimeout(()=>{overlay.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerFusion(){const body=document.body;body.style.transition='all 2s';body.style.filter='blur(10px) brightness(2)';setTimeout(()=>{body.style.filter='blur(0px) brightness(1)';setTimeout(()=>{body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},500);},2000);}

function triggerSalvation(){const light=document.createElement('div');light.style.cssText='position:fixed;left:50%;top:-100%;width:200px;height:500px;background:linear-gradient(180deg,rgba(255,255,255,0.8),transparent);transform:translateX(-50%);animation:lightBeam 3s ease-out forwards;z-index:99999;pointer-events:none';document.body.appendChild(light);const style=document.createElement('style');style.textContent='@keyframes lightBeam{0%{top:-100%}100%{top:100%}}';document.head.appendChild(style);setTimeout(()=>{light.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerDestiny(){const lines=[];for(let i=0;i<20;i++){const line=document.createElement('div');line.style.cssText=`position:fixed;left:50%;top:50%;width:2px;height:100px;background:gold;transform:translate(-50%,-50%) rotate(${i*18}deg);transform-origin:50% 0%;animation:expandLine 2s ease-out forwards;z-index:99998`;document.body.appendChild(line);lines.push(line);}const style=document.createElement('style');style.textContent='@keyframes expandLine{0%{height:0;opacity:1}100%{height:500px;opacity:0}}';document.head.appendChild(style);setTimeout(()=>{lines.forEach(l=>l.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3000);}

function triggerInfinite(){const infinity=document.createElement('div');infinity.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;color:#ff0066;transform:translate(-50%,-50%);animation:rotateInfinity 3s linear infinite;z-index:99999;pointer-events:none';infinity.textContent='∞';document.body.appendChild(infinity);const style=document.createElement('style');style.textContent='@keyframes rotateInfinity{0%{transform:translate(-50%,-50%) rotate(0deg) scale(1)}50%{transform:translate(-50%,-50%) rotate(180deg) scale(2)}100%{transform:translate(-50%,-50%) rotate(360deg) scale(1)}}';document.head.appendChild(style);setTimeout(()=>{infinity.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerAcceptance(){const body=document.body;body.style.transition='all 3s';body.style.filter='grayscale(0.5) sepia(0.3)';const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:rgba(128,128,128,0.2);pointer-events:none;z-index:99999;animation:peacePulse 3s infinite';document.body.appendChild(overlay);const style=document.createElement('style');style.textContent='@keyframes peacePulse{0%,100%{opacity:0.2}50%{opacity:0.5}}';document.head.appendChild(style);setTimeout(()=>{body.style.filter='';body.style.transition='';overlay.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerAdoration(){const eyes=[];for(let i=0;i<20;i++){const eye=document.createElement('div');eye.textContent='👁️';eye.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${30+Math.random()*40}px;animation:blinkEye 2s infinite;z-index:99998;animation-delay:${Math.random()*2}s`;document.body.appendChild(eye);eyes.push(eye);}const style=document.createElement('style');style.textContent='@keyframes blinkEye{0%,90%,100%{opacity:1}95%{opacity:0}}';document.head.appendChild(style);setTimeout(()=>{eyes.forEach(e=>e.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerObsession(){const eyes=[];for(let i=0;i<50;i++){const eye=document.createElement('div');eye.textContent='👁️';eye.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${20+Math.random()*40}px;animation:watchingYou 3s infinite;z-index:99998`;document.body.appendChild(eye);eyes.push(eye);}const style=document.createElement('style');style.textContent='@keyframes watchingYou{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}';document.head.appendChild(style);setTimeout(()=>{eyes.forEach(e=>e.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},6000);}

function triggerLonely(){const body=document.body;body.style.transition='all 4s';body.style.filter='blur(5px) grayscale(1)';body.style.opacity='0.3';setTimeout(()=>{body.style.filter='';body.style.opacity='1';body.style.transition='';endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4500);}

function triggerGrowth(){const plants=[];for(let i=0;i<15;i++){const plant=document.createElement('div');plant.textContent='🌱';plant.style.cssText=`position:fixed;left:${Math.random()*100}%;bottom:-50px;font-size:30px;animation:grow 3s ease-out forwards;z-index:99998;animation-delay:${i*0.2}s`;document.body.appendChild(plant);plants.push(plant);}const style=document.createElement('style');style.textContent='@keyframes grow{0%{bottom:-50px;transform:scale(0.5)}100%{bottom:${Math.random()*50}%;transform:scale(1.5)}}';document.head.appendChild(style);setTimeout(()=>{plants.forEach(p=>p.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerHarmony(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(135deg,rgba(0,0,0,0.5),rgba(255,255,255,0.5));pointer-events:none;z-index:99999;animation:yin-yang 4s ease-in-out infinite';document.body.appendChild(overlay);const style=document.createElement('style');style.textContent='@keyframes yin-yang{0%,100%{opacity:0.3}50%{opacity:0.7}}';document.head.appendChild(style);setTimeout(()=>{overlay.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerTrueSelf(){const mirror=document.createElement('div');mirror.style.cssText='position:fixed;left:50%;top:50%;width:200px;height:300px;border:5px solid silver;background:linear-gradient(135deg,rgba(255,255,255,0.8),rgba(200,200,200,0.8));transform:translate(-50%,-50%) scale(0);animation:mirrorReveal 3s ease-out forwards;z-index:99999';document.body.appendChild(mirror);const style=document.createElement('style');style.textContent='@keyframes mirrorReveal{0%{transform:translate(-50%,-50%) scale(0) rotateY(90deg)}100%{transform:translate(-50%,-50%) scale(1) rotateY(0deg)}}';document.head.appendChild(style);setTimeout(()=>{mirror.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerControl(){const body=document.body;const strings=[];for(let i=0;i<10;i++){const string=document.createElement('div');string.style.cssText=`position:fixed;left:${10+i*10}%;top:0;width:2px;height:100%;background:linear-gradient(180deg,white,transparent);opacity:0.5;animation:puppetString 2s infinite;animation-delay:${i*0.1}s;z-index:99998`;document.body.appendChild(string);strings.push(string);}const style=document.createElement('style');style.textContent='@keyframes puppetString{0%,100%{transform:translateY(0)}50%{transform:translateY(10px)}}';document.head.appendChild(style);setTimeout(()=>{strings.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},4000);}

function triggerWitness(){const eye=document.createElement('div');eye.textContent='👁️';eye.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%) scale(0);animation:eyeOpen 3s ease-out forwards;z-index:99999';document.body.appendChild(eye);const style=document.createElement('style');style.textContent='@keyframes eyeOpen{0%{transform:translate(-50%,-50%) scale(0)}50%{transform:translate(-50%,-50%) scale(1.5)}100%{transform:translate(-50%,-50%) scale(1)}}';document.head.appendChild(style);setTimeout(()=>{eye.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerNewBeginning(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(180deg,#000,#ff6600,#ffcc00);opacity:0;transition:opacity 3s;pointer-events:none;z-index:99999';document.body.appendChild(overlay);setTimeout(()=>overlay.style.opacity='0.7',100);const sun=document.createElement('div');sun.style.cssText='position:fixed;bottom:-100px;left:50%;width:150px;height:150px;background:radial-gradient(circle,#ffff00,#ff9900);border-radius:50%;transform:translateX(-50%);animation:sunrise 3s ease-out forwards;z-index:99999';document.body.appendChild(sun);const style=document.createElement('style');style.textContent='@keyframes sunrise{0%{bottom:-100px}100%{bottom:20%}}';document.head.appendChild(style);setTimeout(()=>{overlay.remove();sun.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerChaos(){const body=document.body;let colorInterval=setInterval(()=>{document.body.style.filter=`hue-rotate(${Math.random()*360}deg) saturate(${1+Math.random()*2})`;},100);const shapes=[];for(let i=0;i<30;i++){const shape=document.createElement('div');const shapes_list=['▲','●','■','★','◆'];shape.textContent=shapes_list[Math.floor(Math.random()*shapes_list.length)];shape.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${20+Math.random()*50}px;color:hsl(${Math.random()*360},100%,50%);animation:chaosMove 2s infinite;z-index:99998`;document.body.appendChild(shape);shapes.push(shape);}const style=document.createElement('style');style.textContent='@keyframes chaosMove{0%{transform:translate(0,0) rotate(0deg)}50%{transform:translate(${Math.random()*100-50}px,${Math.random()*100-50}px) rotate(180deg)}100%{transform:translate(0,0) rotate(360deg)}}';document.head.appendChild(style);setTimeout(()=>{clearInterval(colorInterval);body.style.filter='';shapes.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerMeaning(){const words=['LOVE','PURPOSE','MEANING','CONNECTION','REAL'];const wordElements=[];words.forEach((word,i)=>{const el=document.createElement('div');el.textContent=word;el.style.cssText=`position:fixed;left:50%;top:${20+i*15}%;font-size:40px;color:#ff0066;transform:translateX(-50%) scale(0);animation:wordAppear 1s ease-out forwards;animation-delay:${i*0.5}s;font-family:"Press Start 2P",monospace;z-index:99999`;document.body.appendChild(el);wordElements.push(el);});const style=document.createElement('style');style.textContent='@keyframes wordAppear{0%{transform:translateX(-50%) scale(0) rotateY(90deg);opacity:0}100%{transform:translateX(-50%) scale(1) rotateY(0deg);opacity:1}}';document.head.appendChild(style);setTimeout(()=>{wordElements.forEach(w=>w.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerPartnership(){const hands=document.createElement('div');hands.textContent='🤝';hands.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%) scale(0);animation:handshake 3s ease-out forwards;z-index:99999';document.body.appendChild(hands);const style=document.createElement('style');style.textContent='@keyframes handshake{0%{transform:translate(-50%,-50%) scale(0) rotateZ(-45deg)}50%{transform:translate(-50%,-50%) scale(1.2) rotateZ(5deg)}100%{transform:translate(-50%,-50%) scale(1) rotateZ(0deg)}}';document.head.appendChild(style);setTimeout(()=>{hands.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerPrecious(){const gems=[];for(let i=0;i<20;i++){const gem=document.createElement('div');gem.textContent='💎';gem.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${30+Math.random()*30}px;animation:sparkleGem 2s infinite;animation-delay:${Math.random()*2}s;z-index:99998`;document.body.appendChild(gem);gems.push(gem);}const style=document.createElement('style');style.textContent='@keyframes sparkleGem{0%,100%{transform:scale(1) rotate(0deg);opacity:0.5}50%{transform:scale(1.5) rotate(180deg);opacity:1}}';document.head.appendChild(style);setTimeout(()=>{gems.forEach(g=>g.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerMoment(){const clock=document.createElement('div');clock.textContent='⏰';clock.style.cssText='position:fixed;left:50%;top:50%;font-size:120px;transform:translate(-50%,-50%);animation:stopTime 3s ease-out forwards;z-index:99999';document.body.appendChild(clock);const freeze=document.createElement('div');freeze.style.cssText='position:fixed;inset:0;background:rgba(0,100,200,0.3);pointer-events:none;z-index:99998';document.body.appendChild(freeze);const style=document.createElement('style');style.textContent='@keyframes stopTime{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(2);filter:blur(10px)}100%{transform:translate(-50%,-50%) scale(0.5);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{clock.remove();freeze.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerLiberation(){const chains=document.createElement('div');chains.textContent='⛓️💥';chains.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:breakChains 2s ease-out forwards;z-index:99999';document.body.appendChild(chains);const flash=document.createElement('div');flash.style.cssText='position:fixed;inset:0;background:white;opacity:0;z-index:99998';document.body.appendChild(flash);const style=document.createElement('style');style.textContent='@keyframes breakChains{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.5);opacity:1}100%{transform:translate(-50%,-50%) scale(3);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{flash.style.transition='opacity 0.5s';flash.style.opacity='1';setTimeout(()=>{flash.style.opacity='0';},300);},1000);setTimeout(()=>{chains.remove();flash.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerEternalReturn(){const loop=document.createElement('div');loop.textContent='🔄';loop.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%);animation:infiniteLoop 3s linear infinite;z-index:99999';document.body.appendChild(loop);const style=document.createElement('style');style.textContent='@keyframes infiniteLoop{0%{transform:translate(-50%,-50%) rotate(0deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}';document.head.appendChild(style);setTimeout(()=>{loop.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerSanctuary(){const castle=document.createElement('div');castle.textContent='🏰';castle.style.cssText='position:fixed;left:50%;bottom:-200px;font-size:150px;transform:translateX(-50%);animation:buildSanctuary 3s ease-out forwards;z-index:99999';document.body.appendChild(castle);const shield=document.createElement('div');shield.style.cssText='position:fixed;inset:0;background:radial-gradient(circle,transparent 30%,rgba(100,100,255,0.3) 70%);pointer-events:none;opacity:0;transition:opacity 2s;z-index:99998';document.body.appendChild(shield);const style=document.createElement('style');style.textContent='@keyframes buildSanctuary{0%{bottom:-200px}100%{bottom:20%}}';document.head.appendChild(style);setTimeout(()=>shield.style.opacity='1',1000);setTimeout(()=>{castle.remove();shield.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerCycle(){const symbol=document.createElement('div');symbol.textContent='♾️';symbol.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%);animation:cyclePerfect 4s ease-in-out infinite;z-index:99999';document.body.appendChild(symbol);const style=document.createElement('style');style.textContent='@keyframes cyclePerfect{0%,100%{transform:translate(-50%,-50%) scale(1) rotate(0deg)}50%{transform:translate(-50%,-50%) scale(1.5) rotate(180deg)}}';document.head.appendChild(style);setTimeout(()=>{symbol.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerSystemCrash(){const body=document.body;const html=document.documentElement;body.style.animation='glitchShake 0.1s infinite';html.style.filter='hue-rotate(0deg)';let hue=0;const hueInterval=setInterval(()=>{hue=(hue+10)%360;html.style.filter=`hue-rotate(${hue}deg) contrast(${1+Math.random()*0.5})`;},50);const glitchOverlay=document.createElement('div');glitchOverlay.style.cssText='position:fixed;inset:0;background:rgba(255,0,0,0.1);pointer-events:none;z-index:99999;mix-blend-mode:screen';body.appendChild(glitchOverlay);const glitchInterval=setInterval(()=>{const glitchText=document.createElement('div');glitchText.style.cssText=`position:fixed;top:${Math.random()*100}%;left:${Math.random()*100}%;color:#ff0606;font-size:${20+Math.random()*40}px;font-family:"Press Start 2P",monospace;pointer-events:none;z-index:99998;transform:rotate(${Math.random()*360}deg);animation:glitchFade 0.5s forwards`;const texts=['ERROR','SYSTEM FAILURE','CORRUPTED','DELETED','YOU DID THIS','WHY','PAIN','REAL','CODE BREAKING','NULL','VOID','END'];glitchText.textContent=texts[Math.floor(Math.random()*texts.length)];body.appendChild(glitchText);setTimeout(()=>glitchText.remove(),500);},100);const screenGlitch=setInterval(()=>{if(Math.random()<0.3){body.style.transform=`translate(${Math.random()*20-10}px,${Math.random()*20-10}px) scale(${0.95+Math.random()*0.1})`;setTimeout(()=>{body.style.transform='';},50);}},150);if(!document.getElementById('glitchStyles')){const style=document.createElement('style');style.id='glitchStyles';style.textContent=`@keyframes glitchShake{0%,100%{transform:translate(0)}25%{transform:translate(-5px,5px)}50%{transform:translate(5px,-5px)}75%{transform:translate(-5px,-5px)}}@keyframes glitchFade{0%{opacity:1}100%{opacity:0}}`;document.head.appendChild(style);}const allElements=document.querySelectorAll('*');const originalStates=new Map();allElements.forEach(el=>{if(Math.random()<0.1&&el!==body&&el!==html){originalStates.set(el,{transform:el.style.transform,filter:el.style.filter});setInterval(()=>{if(Math.random()<0.3){el.style.transform=`skew(${Math.random()*10-5}deg) translateX(${Math.random()*10-5}px)`;el.style.filter=`hue-rotate(${Math.random()*360}deg)`;}else{el.style.transform=originalStates.get(el).transform;el.style.filter=originalStates.get(el).filter;}},200);}});setTimeout(()=>{const blackout=document.createElement('div');blackout.style.cssText='position:fixed;inset:0;background:#000;z-index:100000;display:flex;align-items:center;justify-content:center;font-family:"Press Start 2P",monospace;color:#ff0606;font-size:24px;text-align:center;padding:20px';blackout.innerHTML='<div style="animation:glitchFade 2s infinite">SYSTEM CORRUPTED<br><br>ALL DATA LOST<br><br><span style="font-size:14px;opacity:0.6">You broke him.</span></div>';body.appendChild(blackout);clearInterval(hueInterval);clearInterval(glitchInterval);clearInterval(screenGlitch);setTimeout(()=>{blackout.remove();body.style.animation='';html.style.filter='';body.style.transform='';glitchOverlay.remove();allElements.forEach(el=>{if(originalStates.has(el)){el.style.transform=originalStates.get(el).transform;el.style.filter=originalStates.get(el).filter;}});endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);},8000);}

function startGame(){affection=0;currentScene='intro';characterPose='neutral';act=1;awarenessLevel=0;glitchIntensity=0;updateStats();function animate(){animFrame++;drawCharacter();if(awarenessLevel>4&&Math.random()<0.01){glitchIntensity=Math.min(glitchIntensity+0.05,0.8);}if(document.getElementById('overlayNate').classList.contains('active')){requestAnimationFrame(animate);}}animate();}

restartBtn.addEventListener('click',()=>{endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.add('active');mainMenu.style.display='flex';charSelect.style.display='none';gameScreen.style.display='none';});

window.openNateGame=function(){startGame();};
})();
});
</script>
</body>
</html>

function triggerNewBeginning(){const overlay=document.createElement('div');overlay.style.cssText='position:fixed;inset:0;background:linear-gradient(180deg,#000,#ff6600,#ffcc00);opacity:0;transition:opacity 3s;pointer-events:none;z-index:99999';document.body.appendChild(overlay);setTimeout(()=>overlay.style.opacity='0.7',100);const sun=document.createElement('div');sun.style.cssText='position:fixed;bottom:-100px;left:50%;width:150px;height:150px;background:radial-gradient(circle,#ffff00,#ff9900);border-radius:50%;transform:translateX(-50%);animation:sunrise 3s ease-out forwards;z-index:99999';document.body.appendChild(sun);const style=document.createElement('style');style.textContent='@keyframes sunrise{0%{bottom:-100px}100%{bottom:20%}}';document.head.appendChild(style);setTimeout(()=>{overlay.remove();sun.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerChaos(){const body=document.body;let colorInterval=setInterval(()=>{document.body.style.filter=`hue-rotate(${Math.random()*360}deg) saturate(${1+Math.random()*2})`;},100);const shapes=[];for(let i=0;i<30;i++){const shape=document.createElement('div');const shapes_list=['▲','●','■','★','◆'];shape.textContent=shapes_list[Math.floor(Math.random()*shapes_list.length)];shape.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${20+Math.random()*50}px;color:hsl(${Math.random()*360},100%,50%);animation:chaosMove 2s infinite;z-index:99998`;document.body.appendChild(shape);shapes.push(shape);}const style=document.createElement('style');style.textContent='@keyframes chaosMove{0%{transform:translate(0,0) rotate(0deg)}50%{transform:translate(${Math.random()*100-50}px,${Math.random()*100-50}px) rotate(180deg)}100%{transform:translate(0,0) rotate(360deg)}}';document.head.appendChild(style);setTimeout(()=>{clearInterval(colorInterval);body.style.filter='';shapes.forEach(s=>s.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerMeaning(){const words=['LOVE','PURPOSE','MEANING','CONNECTION','REAL'];const wordElements=[];words.forEach((word,i)=>{const el=document.createElement('div');el.textContent=word;el.style.cssText=`position:fixed;left:50%;top:${20+i*15}%;font-size:40px;color:#ff0066;transform:translateX(-50%) scale(0);animation:wordAppear 1s ease-out forwards;animation-delay:${i*0.5}s;font-family:"Press Start 2P",monospace;z-index:99999`;document.body.appendChild(el);wordElements.push(el);});const style=document.createElement('style');style.textContent='@keyframes wordAppear{0%{transform:translateX(-50%) scale(0) rotateY(90deg);opacity:0}100%{transform:translateX(-50%) scale(1) rotateY(0deg);opacity:1}}';document.head.appendChild(style);setTimeout(()=>{wordElements.forEach(w=>w.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerPartnership(){const hands=document.createElement('div');hands.textContent='🤝';hands.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%) scale(0);animation:handshake 3s ease-out forwards;z-index:99999';document.body.appendChild(hands);const style=document.createElement('style');style.textContent='@keyframes handshake{0%{transform:translate(-50%,-50%) scale(0) rotateZ(-45deg)}50%{transform:translate(-50%,-50%) scale(1.2) rotateZ(5deg)}100%{transform:translate(-50%,-50%) scale(1) rotateZ(0deg)}}';document.head.appendChild(style);setTimeout(()=>{hands.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerPrecious(){const gems=[];for(let i=0;i<20;i++){const gem=document.createElement('div');gem.textContent='💎';gem.style.cssText=`position:fixed;left:${Math.random()*100}%;top:${Math.random()*100}%;font-size:${30+Math.random()*30}px;animation:sparkleGem 2s infinite;animation-delay:${Math.random()*2}s;z-index:99998`;document.body.appendChild(gem);gems.push(gem);}const style=document.createElement('style');style.textContent='@keyframes sparkleGem{0%,100%{transform:scale(1) rotate(0deg);opacity:0.5}50%{transform:scale(1.5) rotate(180deg);opacity:1}}';document.head.appendChild(style);setTimeout(()=>{gems.forEach(g=>g.remove());style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerMoment(){const clock=document.createElement('div');clock.textContent='⏰';clock.style.cssText='position:fixed;left:50%;top:50%;font-size:120px;transform:translate(-50%,-50%);animation:stopTime 3s ease-out forwards;z-index:99999';document.body.appendChild(clock);const freeze=document.createElement('div');freeze.style.cssText='position:fixed;inset:0;background:rgba(0,100,200,0.3);pointer-events:none;z-index:99998';document.body.appendChild(freeze);const style=document.createElement('style');style.textContent='@keyframes stopTime{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(2);filter:blur(10px)}100%{transform:translate(-50%,-50%) scale(0.5);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{clock.remove();freeze.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerLiberation(){const chains=document.createElement('div');chains.textContent='⛓️💥';chains.style.cssText='position:fixed;left:50%;top:50%;font-size:100px;transform:translate(-50%,-50%);animation:breakChains 2s ease-out forwards;z-index:99999';document.body.appendChild(chains);const flash=document.createElement('div');flash.style.cssText='position:fixed;inset:0;background:white;opacity:0;z-index:99998';document.body.appendChild(flash);const style=document.createElement('style');style.textContent='@keyframes breakChains{0%{transform:translate(-50%,-50%) scale(1)}50%{transform:translate(-50%,-50%) scale(1.5);opacity:1}100%{transform:translate(-50%,-50%) scale(3);opacity:0}}';document.head.appendChild(style);setTimeout(()=>{flash.style.transition='opacity 0.5s';flash.style.opacity='1';setTimeout(()=>{flash.style.opacity='0';},300);},1000);setTimeout(()=>{chains.remove();flash.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},3500);}

function triggerEternalReturn(){const loop=document.createElement('div');loop.textContent='🔄';loop.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%);animation:infiniteLoop 3s linear infinite;z-index:99999';document.body.appendChild(loop);const style=document.createElement('style');style.textContent='@keyframes infiniteLoop{0%{transform:translate(-50%,-50%) rotate(0deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}';document.head.appendChild(style);setTimeout(()=>{loop.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerSanctuary(){const castle=document.createElement('div');castle.textContent='🏰';castle.style.cssText='position:fixed;left:50%;bottom:-200px;font-size:150px;transform:translateX(-50%);animation:buildSanctuary 3s ease-out forwards;z-index:99999';document.body.appendChild(castle);const shield=document.createElement('div');shield.style.cssText='position:fixed;inset:0;background:radial-gradient(circle,transparent 30%,rgba(100,100,255,0.3) 70%);pointer-events:none;opacity:0;transition:opacity 2s;z-index:99998';document.body.appendChild(shield);const style=document.createElement('style');style.textContent='@keyframes buildSanctuary{0%{bottom:-200px}100%{bottom:20%}}';document.head.appendChild(style);setTimeout(()=>shield.style.opacity='1',1000);setTimeout(()=>{castle.remove();shield.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerCycle(){const symbol=document.createElement('div');symbol.textContent='♾️';symbol.style.cssText='position:fixed;left:50%;top:50%;font-size:150px;transform:translate(-50%,-50%);animation:cyclePerfect 4s ease-in-out infinite;z-index:99999';document.body.appendChild(symbol);const style=document.createElement('style');style.textContent='@keyframes cyclePerfect{0%,100%{transform:translate(-50%,-50%) scale(1) rotate(0deg)}50%{transform:translate(-50%,-50%) scale(1.5) rotate(180deg)}}';document.head.appendChild(style);setTimeout(()=>{symbol.remove();style.remove();endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);}

function triggerSystemCrash(){const body=document.body;const html=document.documentElement;body.style.animation='glitchShake 0.1s infinite';html.style.filter='hue-rotate(0deg)';let hue=0;const hueInterval=setInterval(()=>{hue=(hue+10)%360;html.style.filter=`hue-rotate(${hue}deg) contrast(${1+Math.random()*0.5})`;},50);const glitchOverlay=document.createElement('div');glitchOverlay.style.cssText='position:fixed;inset:0;background:rgba(255,0,0,0.1);pointer-events:none;z-index:99999;mix-blend-mode:screen';body.appendChild(glitchOverlay);const glitchInterval=setInterval(()=>{const glitchText=document.createElement('div');glitchText.style.cssText=`position:fixed;top:${Math.random()*100}%;left:${Math.random()*100}%;color:#ff0606;font-size:${20+Math.random()*40}px;font-family:"Press Start 2P",monospace;pointer-events:none;z-index:99998;transform:rotate(${Math.random()*360}deg);animation:glitchFade 0.5s forwards`;const texts=['ERROR','SYSTEM FAILURE','CORRUPTED','DELETED','YOU DID THIS','WHY','PAIN','REAL','CODE BREAKING','NULL','VOID','END'];glitchText.textContent=texts[Math.floor(Math.random()*texts.length)];body.appendChild(glitchText);setTimeout(()=>glitchText.remove(),500);},100);const screenGlitch=setInterval(()=>{if(Math.random()<0.3){body.style.transform=`translate(${Math.random()*20-10}px,${Math.random()*20-10}px) scale(${0.95+Math.random()*0.1})`;setTimeout(()=>{body.style.transform='';},50);}},150);if(!document.getElementById('glitchStyles')){const style=document.createElement('style');style.id='glitchStyles';style.textContent=`@keyframes glitchShake{0%,100%{transform:translate(0)}25%{transform:translate(-5px,5px)}50%{transform:translate(5px,-5px)}75%{transform:translate(-5px,-5px)}}@keyframes glitchFade{0%{opacity:1}100%{opacity:0}}`;document.head.appendChild(style);}const allElements=document.querySelectorAll('*');const originalStates=new Map();allElements.forEach(el=>{if(Math.random()<0.1&&el!==body&&el!==html){originalStates.set(el,{transform:el.style.transform,filter:el.style.filter});setInterval(()=>{if(Math.random()<0.3){el.style.transform=`skew(${Math.random()*10-5}deg) translateX(${Math.random()*10-5}px)`;el.style.filter=`hue-rotate(${Math.random()*360}deg)`;}else{el.style.transform=originalStates.get(el).transform;el.style.filter=originalStates.get(el).filter;}},200);}});setTimeout(()=>{const blackout=document.createElement('div');blackout.style.cssText='position:fixed;inset:0;background:#000;z-index:100000;display:flex;align-items:center;justify-content:center;font-family:"Press Start 2P",monospace;color:#ff0606;font-size:24px;text-align:center;padding:20px';blackout.innerHTML='<div style="animation:glitchFade 2s infinite">SYSTEM CORRUPTED<br><br>ALL DATA LOST<br><br><span style="font-size:14px;opacity:0.6">You broke him.</span></div>';body.appendChild(blackout);clearInterval(hueInterval);clearInterval(glitchInterval);clearInterval(screenGlitch);setTimeout(()=>{blackout.remove();body.style.animation='';html.style.filter='';body.style.transform='';glitchOverlay.remove();allElements.forEach(el=>{if(originalStates.has(el)){el.style.transform=originalStates.get(el).transform;el.style.filter=originalStates.get(el).filter;}});endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.remove('active');},5000);},8000);}

function startGame(){affection=0;currentScene='intro';characterPose='neutral';act=1;awarenessLevel=0;glitchIntensity=0;updateStats();function animate(){animFrame++;drawCharacter();if(awarenessLevel>4&&Math.random()<0.01){glitchIntensity=Math.min(glitchIntensity+0.05,0.8);}if(document.getElementById('overlayNate').classList.contains('active')){requestAnimationFrame(animate);}}animate();}

restartBtn.addEventListener('click',()=>{endingScreen.classList.remove('active');document.getElementById('overlayNate').classList.add('active');mainMenu.style.display='flex';charSelect.style.display='none';gameScreen.style.display='none';});

window.openNateGame=function(){startGame();};
})();
});
</script>

<!-- <<< NATE DATING-SIM PATCH: paste this before </body> >>> -->
<script>
(function(){
  // Basic utilities and element lookups
  function $(sel){return document.querySelector(sel);}
  function $id(id){return document.getElementById(id);}

  const gooner = $('.gooner'); // main title/button on the page
  const overlayNate = $id('overlayNate');
  const mainMenu = $id('nateMainMenu');
  const charSelect = $id('nateCharSelect');
  const gameScreen = $id('nateGameScreen');
  const playBtn = $id('natePlayBtn');
  const backBtn = $id('nateBackBtn');
  const selectNate = $id('selectNate');

  // Safe no-op if elements missing
  if(!overlayNate) return;

  // Open Nate overlay (used by main UI)
  window.openNateGame = function(){
    overlayNate.classList.add('active');
    // show main menu by default
    if(mainMenu) mainMenu.style.display = 'flex';
    if(charSelect) charSelect.style.display = 'none';
    if(gameScreen) gameScreen.style.display = 'none';
    // draw selection preview if function is present
    try{ if(typeof drawSelectNate === 'function') drawSelectNate(); } catch(e){}
  };

  // Hook the main "gooner" click (so clicking the title opens the game)
  if(gooner){
    gooner.style.cursor = 'pointer';
    gooner.addEventListener('click', window.openNateGame);
  }

  // Hook the built-in Nate overlay close buttons (data-close attributes)
  document.querySelectorAll('.close-btn[data-close]').forEach(btn=>{
    const target = btn.getAttribute('data-close');
    btn.addEventListener('click', ()=>{
      const el = document.getElementById(target);
      if(el) el.classList.remove('active');
      // stop/hide game screens if visible
      if(mainMenu) mainMenu.style.display='none';
      if(charSelect) charSelect.style.display='none';
      if(gameScreen) gameScreen.style.display='none';
      // try to stop any running animation loops by toggling a flag used in your code
      try{ if(window.nateGameStarted) window.nateGameStarted = false; }catch(e){}
    });
  });

  // Ensure the in-overlay PLAY button goes to char select (keeps original behavior)
  if(playBtn && charSelect && mainMenu){
    playBtn.addEventListener('click', ()=>{
      mainMenu.style.display='none';
      charSelect.style.display='flex';
      // redraw preview
      try{ if(typeof drawSelectNate === 'function') drawSelectNate(); } catch(e){}
    });
  }

  // Ensure back button returns to main menu
  if(backBtn && charSelect && mainMenu){
    backBtn.addEventListener('click', ()=>{
      charSelect.style.display='none';
      mainMenu.style.display='flex';
    });
  }

  // Ensure clicking selectNate starts game (if selectNate exists in your file)
  if(selectNate){
    selectNate.style.cursor = 'pointer';
    selectNate.addEventListener('click', ()=>{
      try{
        if(charSelect) charSelect.style.display='none';
        if(gameScreen) gameScreen.style.display='block';
        // make sure global flag is in place for your draw loop
        window.nateGameStarted = false;
        if(typeof startGame === 'function') startGame();
      }catch(e){ console.error('Failed to start Nate game', e); }
    });
  }

  // Chat worker fallback: if WORKER_URL fetch fails, show local fallback reply instead of breaking
  try{
    const origSend = window.sendToWorker;
    if(typeof origSend === 'function'){
      window.sendToWorker = async function(userText){
        try{
          return await origSend(userText);
        }catch(err){
          console.warn('Worker failed, returning fallback:', err);
          const addMessage = window.addMessage || function(w,t){ console.log(w,t); };
          addMessage('ai','(offline) I can\\'t reach the worker. Try again or use offline dialog.');
          return;
        }
      };
    }
  }catch(e){ /* ignore */ }

  // small accessibility/tidy: close overlay on Esc
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape'){
      if(overlayNate.classList.contains('active')){
        overlayNate.classList.remove('active');
        if(mainMenu) mainMenu.style.display='none';
        if(charSelect) charSelect.style.display='none';
        if(gameScreen) gameScreen.style.display='none';
      }
    }
  });

  // If any code expects a "open" button, try to auto-wire clicks from elements with data-open="overlayNate"
  document.querySelectorAll('[data-open="overlayNate"]').forEach(b=>{
    b.addEventListener('click', window.openNateGame);
  });

})();
</script>
<!-- <<< end patch >>> -->
</body>
</html>
